import{_ as dt,r as p,u as ut,c as j,w as G,o as vt,a as m,b as c,d as r,e as t,f as n,g as R,h as x,i as v,j as L,s as ht,k as C,t as o,n as B,l as pt,p as mt,F as $,m as I,q as gt,v as M,x as U,y as _t,L as ft}from"./index-BFtI-PwE.js";import{B as kt,C as bt}from"./CompareBar-B9z7Bt5A.js";import{a as wt,g as yt}from"./ProductClientService-BX6QUyHF.js";import{D as Ct}from"./DanhGiaSanPhamClientService-DHhPE4UI.js";const Pt={class:"modern-ecommerce"},Tt={class:"hero-search-section"},St={class:"container"},Vt={class:"search-hero"},xt={class:"search-content"},Lt={class:"mega-search-bar"},Bt={class:"search-input-container"},Ft={class:"quick-search-tags"},Nt={class:"tags-container"},$t={class:"main-content"},Dt={class:"container"},qt={class:"content-header"},At={class:"results-info"},Gt={class:"results-title"},Rt={key:0,class:"results-count"},It={key:1,class:"search-term"},Mt={class:"results-subtitle"},Ut={class:"view-controls"},zt={class:"sort-control"},Et={class:"sort-buttons"},Ht={class:"content-layout"},jt={class:"filters-sidebar"},Kt={class:"filters-container"},Xt={class:"filter-header"},Ot={class:"filter-title"},Qt={key:0,class:"active-filters"},Jt={class:"active-filters-list"},Wt={key:0,class:"filter-chip"},Yt={class:"chip-label"},Zt={key:1,class:"filter-chip"},ts={class:"chip-label"},ss={class:"filter-group"},es={class:"filter-group-header"},as={class:"filter-icon"},ns={class:"filter-info"},is={class:"filter-value"},os={class:"filter-content"},ls={class:"price-slider-wrapper"},cs={class:"price-quick-filters"},rs=["onClick"],ds={class:"filter-group"},us={class:"filter-group-header"},vs={class:"filter-icon"},hs={class:"filter-content"},ps={class:"category-options"},ms=["onClick"],gs={class:"option-content"},_s={class:"option-label"},fs={class:"products-main"},ks={class:"products-grid"},bs={class:"product-card-inner"},ws={class:"product-image-wrapper"},ys={class:"product-image-container-modern"},Cs=["src","alt"],Ps={class:"product-info-modern"},Ts={class:"product-meta"},Ss={class:"product-brand"},Vs={class:"product-rating-compact"},xs={class:"product-title-modern"},Ls={class:"product-pricing"},Bs={class:"price-current"},Fs={class:"product-actions-modern"},Ns=["onClick"],$s={key:1,class:"compare-btn active",disabled:""},Ds={class:"pagination-wrapper"},qs={class:"pagination-info"},As={class:"no-products-modern"};(function(){var w=document.createElement("script"),f=document.getElementsByTagName("script")[0];w.async=!0,w.src="https://embed.tawk.to/68836581db7610192eeaacd6/1j10k90i5",w.charset="UTF-8",w.setAttribute("crossorigin","*"),f.parentNode.insertBefore(w,f)})();const Gs={__name:"CustomerHome",setup(w){const f=p(!1),d=p(""),g=p(""),i=p([0,5e7]),u=p(1),F=16,k=p(0),h=p(""),D=p([]),K=ut();let P=null;const T=0,S=5e7,X=1e6,O=()=>{if(window.Tawk_API)return;const a=document.createElement("script");a.async=!0,a.src="https://embed.tawk.to/68836581db7610192eeaacd6/1j10k90i5",a.charset="UTF-8",a.setAttribute("crossorigin","*");const s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(a,s),window.Tawk_API=window.Tawk_API||{},window.Tawk_LoadStart=new Date},_=async()=>{try{const a={page:u.value-1,tenSanPham:d.value||null,idLoai:g.value||null,giaMin:i.value[0],giaMax:i.value[1],sort:h.value||null},s=await yt(a);console.log(s,"sai máº¹ r"),D.value=await Promise.all((s.content||s).map(async l=>{try{const y=await Ct.tinhDiemTrungBinhSanPham(l.id);return console.log("tao cÆ°á»ng",y),{...l,averageRating:y||0}}catch(y){return console.error(`Lá»—i khi láº¥y Ä‘iá»ƒm trung bÃ¬nh cho sáº£n pháº©m ${l.id}:`,y),{...l,averageRating:0}}})),k.value=s.totalElements||s.length,f.value=d.value||g.value||i.value[0]!==T||i.value[1]!==S}catch(a){console.error("Lá»—i khi load sáº£n pháº©m:",a)}},Q=()=>{P&&clearTimeout(P),P=setTimeout(()=>{u.value=1,_()},500)},q=p([{label:"Táº¥t cáº£",value:""}]),A=j(()=>D.value.length>0),J=async()=>{try{const a=await wt();q.value=[{label:"Táº¥t cáº£",value:""},...a.map(s=>({label:s.tenLoai,value:s.idLoai}))]}catch(a){console.error("Lá»—i khi láº¥y danh sÃ¡ch loáº¡i",a)}},z=()=>{P&&clearTimeout(P),d.value="",g.value="",i.value=[T,S],f.value=!1,u.value=1,_()},W=a=>new Intl.NumberFormat("vi-VN").format(a)+"â‚«",V=a=>a>=1e6?(a/1e6).toFixed(a%1e6===0?0:1)+"tr":new Intl.NumberFormat("vi-VN").format(a)+"â‚«",Y=[{label:"DÆ°á»›i 5tr",range:[0,5e6]},{label:"5tr - 10tr",range:[5e6,1e7]},{label:"10tr - 20tr",range:[1e7,2e7]},{label:"20tr - 30tr",range:[2e7,3e7]},{label:"TrÃªn 30tr",range:[3e7,5e7]}],Z=a=>{i.value=[...a]};j(()=>{if(h.value==="")return"Sáº¯p xáº¿p giÃ¡";if(h.value==="giaAsc")return"GiÃ¡ tÄƒng dáº§n";if(h.value==="giaDesc")return"GiÃ¡ giáº£m dáº§n"}),G(d,()=>{Q()}),G([g,i],()=>{u.value=1,_()},{deep:!0}),G(u,()=>{_()}),vt(()=>{J(),_(),O()});const b=p([]),tt=a=>{if(b.value.length>=3){K.warning("Báº¡n chá»‰ cÃ³ thá»ƒ so sÃ¡nh tá»‘i Ä‘a 3 sáº£n pháº©m");return}b.value.find(s=>s.id===a.id)||b.value.push(a)},st=a=>b.value.some(s=>s.id===a.id),et=a=>{b.value=b.value.filter(s=>s.id!==a.id)};return(a,s)=>{var H;const l=m("el-icon"),y=m("el-input"),at=m("Filter"),E=m("Close"),nt=m("el-slider"),it=m("el-rate"),ot=m("Check"),lt=m("router-link"),ct=m("el-pagination"),rt=m("Refresh");return r(),c($,null,[t("section",Pt,[n(kt),t("div",Tt,[t("div",St,[t("div",Vt,[t("div",xt,[s[13]||(s[13]=t("h1",{class:"search-title"},[t("span",{class:"gradient-text"},"KhÃ¡m phÃ¡"),x(" sáº£n pháº©m yÃªu thÃ­ch ")],-1)),s[14]||(s[14]=t("p",{class:"search-subtitle"}," TÃ¬m kiáº¿m trong hÃ ng nghÃ¬n sáº£n pháº©m chÃ­nh hÃ£ng vá»›i giÃ¡ tá»‘t nháº¥t ",-1)),t("div",Lt,[t("div",Bt,[n(y,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),placeholder:"TÃ¬m kiáº¿m iPhone...",class:"mega-search-input",size:"large",clearable:""},{prefix:v(()=>[n(l,{class:"search-icon"},{default:v(()=>[n(L(ht))]),_:1})]),_:1},8,["modelValue"])]),t("div",Ft,[s[12]||(s[12]=t("span",{class:"tags-label"},"TÃ¬m kiáº¿m phá»• biáº¿n:",-1)),t("div",Nt,[t("span",{class:"quick-tag",onClick:s[1]||(s[1]=e=>d.value="iPhone 15")},"iPhone 15"),t("span",{class:"quick-tag",onClick:s[2]||(s[2]=e=>d.value="iPhone 16")},"iPhone 16"),t("span",{class:"quick-tag",onClick:s[3]||(s[3]=e=>d.value="iPhone 14")},"iPhone 14"),t("span",{class:"quick-tag",onClick:s[4]||(s[4]=e=>d.value="iPhone 13")},"iPhone 13")])])])])])])]),t("div",$t,[t("div",Dt,[t("div",qt,[t("div",At,[t("h5",Gt,[k.value>0?(r(),c("span",Rt,o(k.value),1)):C("",!0),s[15]||(s[15]=x(" sáº£n pháº©m ")),d.value?(r(),c("span",It,'cho "'+o(d.value)+'"',1)):C("",!0)]),t("p",Mt," ÄÆ°á»£c cáº­p nháº­t "+o(new Date().toLocaleDateString("vi-VN")),1)]),t("div",Ut,[t("div",zt,[t("div",Et,[t("button",{class:B(["sort-text-btn",{active:h.value===""}]),onClick:s[5]||(s[5]=e=>{h.value="",u.value=1,_()})}," Máº·c Ä‘á»‹nh ",2),s[16]||(s[16]=t("span",{class:"sort-separator"},"â€¢",-1)),t("button",{class:B(["sort-text-btn",{active:h.value==="giaAsc"}]),onClick:s[6]||(s[6]=e=>{h.value="giaAsc",u.value=1,_()})}," GiÃ¡ tÄƒng dáº§n ",2),s[17]||(s[17]=t("span",{class:"sort-separator"},"â€¢",-1)),t("button",{class:B(["sort-text-btn",{active:h.value==="giaDesc"}]),onClick:s[7]||(s[7]=e=>{h.value="giaDesc",u.value=1,_()})}," GiÃ¡ giáº£m dáº§n ",2)])])])]),t("div",Ht,[t("aside",jt,[t("div",Kt,[t("div",Xt,[t("h3",Ot,[n(l,null,{default:v(()=>[n(at)]),_:1}),s[18]||(s[18]=x(" Bá»™ lá»c "))]),f.value?(r(),c("button",{key:0,onClick:z,class:"clear-all-btn"},[n(l,null,{default:v(()=>[n(L(pt))]),_:1}),s[19]||(s[19]=x(" XÃ³a táº¥t cáº£ "))])):C("",!0)]),f.value?(r(),c("div",Qt,[t("div",Jt,[i.value[0]!==T||i.value[1]!==S?(r(),c("div",Wt,[t("span",Yt,"GiÃ¡: "+o(V(i.value[0]))+" - "+o(V(i.value[1])),1),t("button",{class:"chip-remove",onClick:s[8]||(s[8]=e=>i.value=[T,S])},[n(l,null,{default:v(()=>[n(E)]),_:1})])])):C("",!0),g.value?(r(),c("div",Zt,[t("span",ts,o((H=q.value.find(e=>e.value===g.value))==null?void 0:H.label),1),t("button",{class:"chip-remove",onClick:s[9]||(s[9]=e=>g.value="")},[n(l,null,{default:v(()=>[n(E)]),_:1})])])):C("",!0)])])):C("",!0),t("div",ss,[t("div",es,[t("div",as,[n(l,null,{default:v(()=>[n(L(mt))]),_:1})]),t("div",ns,[s[20]||(s[20]=t("h4",{class:"filter-name"},"Khoáº£ng giÃ¡",-1)),t("span",is,o(V(i.value[0]))+" - "+o(V(i.value[1])),1)])]),t("div",os,[t("div",ls,[n(nt,{modelValue:i.value,"onUpdate:modelValue":s[10]||(s[10]=e=>i.value=e),range:"",min:T,max:S,step:X,"format-tooltip":V,class:"modern-price-slider"},null,8,["modelValue"])]),t("div",cs,[(r(),c($,null,I(Y,e=>t("button",{key:e.label,class:B(["price-quick-btn",{active:i.value[0]===e.range[0]&&i.value[1]===e.range[1]}]),onClick:N=>Z(e.range)},o(e.label),11,rs)),64))])])]),t("div",ds,[t("div",us,[t("div",vs,[n(l,null,{default:v(()=>[n(L(gt))]),_:1})]),s[21]||(s[21]=t("div",{class:"filter-info"},[t("h4",{class:"filter-name"},"Danh má»¥c")],-1))]),t("div",hs,[t("div",ps,[(r(!0),c($,null,I(q.value,e=>(r(),c("div",{key:e.value,class:B(["category-option",{active:g.value===e.value}]),onClick:N=>g.value=e.value},[t("div",gs,[t("span",_s,o(e.label),1)]),s[22]||(s[22]=t("div",{class:"option-indicator"},null,-1))],10,ms))),128))])])]),s[23]||(s[23]=R('<div class="filter-highlights" data-v-987c0c24><h4 class="highlights-title" data-v-987c0c24>Táº¡i sao chá»n chÃºng tÃ´i?</h4><div class="highlights-list" data-v-987c0c24><div class="highlight-item" data-v-987c0c24><div class="highlight-icon" data-v-987c0c24>ğŸšš</div><span data-v-987c0c24>Miá»…n phÃ­ váº­n chuyá»ƒn</span></div><div class="highlight-item" data-v-987c0c24><div class="highlight-icon" data-v-987c0c24>ğŸ›¡ï¸</div><span data-v-987c0c24>Báº£o hÃ nh chÃ­nh hÃ£ng</span></div><div class="highlight-item" data-v-987c0c24><div class="highlight-icon" data-v-987c0c24>âš¡</div><span data-v-987c0c24>Giao hÃ ng nhanh 2h</span></div></div></div>',1))])]),t("main",fs,[M(t("div",ks,[(r(!0),c($,null,I(D.value,e=>(r(),c("div",{key:e.id,class:"product-card-modern"},[n(lt,{to:`/client/detail/${e.id}`,class:"product-link-modern"},{default:v(()=>[t("div",bs,[t("div",ws,[t("div",ys,[t("img",{src:e.hinhAnh||"/img/no-image.png",alt:e.tenSanPham,class:"product-image-modern",loading:"lazy"},null,8,Cs)])]),t("div",Ps,[t("div",Ts,[t("span",Ss,o(e.maXuatXu),1),t("div",Vs,[n(it,{modelValue:e.averageRating,"onUpdate:modelValue":N=>e.averageRating=N,disabled:"","allow-half":"",size:"small",class:"rating-stars"},null,8,["modelValue","onUpdate:modelValue"])])]),t("h3",xs,o(e.tenSanPham),1),s[24]||(s[24]=t("div",{class:"product-features"},[t("span",{class:"feature-tag"},"ChÃ­nh hÃ£ng"),t("span",{class:"feature-tag"},"Báº£o hÃ nh 12 thÃ¡ng")],-1)),t("div",Ls,[t("div",Bs,o(W(e.giaBan)),1)])]),t("div",Fs,[st(e)?(r(),c("button",$s,[n(l,null,{default:v(()=>[n(ot)]),_:1}),s[26]||(s[26]=t("span",null,"ÄÃ£ thÃªm",-1))])):(r(),c("button",{key:0,class:"compare",onClick:_t(N=>tt(e),["stop","prevent"])},[n(l,null,{default:v(()=>[n(L(ft))]),_:1}),s[25]||(s[25]=t("span",null,"So sÃ¡nh",-1))],8,Ns))])])]),_:2},1032,["to"])]))),128))],512),[[U,A.value]]),M(t("div",Ds,[t("div",qs,[t("span",null,"Hiá»ƒn thá»‹ "+o((u.value-1)*F+1)+" - "+o(Math.min(u.value*F,k.value))+" trong "+o(k.value)+" sáº£n pháº©m",1)]),n(ct,{"current-page":u.value,"onUpdate:currentPage":s[11]||(s[11]=e=>u.value=e),"page-size":F,total:k.value,layout:"prev, pager, next, jumper",background:!0,class:"modern-pagination"},null,8,["current-page","total"])],512),[[U,A.value&&k.value>F]]),M(t("div",As,[s[28]||(s[28]=R('<div class="no-products-illustration" data-v-987c0c24><div class="illustration-icon" data-v-987c0c24>ğŸ“±</div><div class="illustration-bg" data-v-987c0c24></div></div><h3 class="no-products-title" data-v-987c0c24>KhÃ´ng tÃ¬m tháº¥y sáº£n pháº©m</h3><p class="no-products-subtitle" data-v-987c0c24> HÃ£y thá»­ Ä‘iá»u chá»‰nh bá»™ lá»c hoáº·c tÃ¬m kiáº¿m vá»›i tá»« khÃ³a khÃ¡c </p>',3)),t("button",{class:"reset-filters-btn",onClick:z},[n(l,null,{default:v(()=>[n(rt)]),_:1}),s[27]||(s[27]=x(" Äáº·t láº¡i bá»™ lá»c "))])],512),[[U,!A.value]])])])])]),s[29]||(s[29]=R('<div class="trust-section" data-v-987c0c24><div class="container" data-v-987c0c24><div class="trust-indicators" data-v-987c0c24><div class="trust-item" data-v-987c0c24><div class="trust-icon" data-v-987c0c24>ğŸ›¡ï¸</div><div class="trust-content" data-v-987c0c24><h4 data-v-987c0c24>Sáº£n pháº©m chÃ­nh hÃ£ng</h4><p data-v-987c0c24>100% hÃ ng chÃ­nh hÃ£ng</p></div></div><div class="trust-item" data-v-987c0c24><div class="trust-icon" data-v-987c0c24>ğŸšš</div><div class="trust-content" data-v-987c0c24><h4 data-v-987c0c24>Giao hÃ ng toÃ n quá»‘c</h4><p data-v-987c0c24>Giao táº­n tay</p></div></div><div class="trust-item" data-v-987c0c24><div class="trust-icon" data-v-987c0c24>ğŸ’¬</div><div class="trust-content" data-v-987c0c24><h4 data-v-987c0c24>Há»— trá»£ 24/7</h4><p data-v-987c0c24>TÆ° váº¥n miá»…n phÃ­</p></div></div><div class="trust-item" data-v-987c0c24><div class="trust-icon" data-v-987c0c24>â†©ï¸</div><div class="trust-content" data-v-987c0c24><h4 data-v-987c0c24>Äá»•i tráº£ dá»… dÃ ng</h4><p data-v-987c0c24>Äá»‘i vá»›i sáº£n pháº©m lá»—i tá»« chÃºng tÃ´i</p></div></div></div></div></div>',1))]),n(bt,{compareList:b.value,onRemove:et},null,8,["compareList"])],64)}}},zs=dt(Gs,[["__scopeId","data-v-987c0c24"]]);export{zs as default};
