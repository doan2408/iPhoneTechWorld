import{_ as bs,z as _s,A as Ts,r as _,w as W,o as ys,a as I,b as g,d as u,e,k as L,F as Y,m as Z,n as C,t as a,h as D,y as is,f as R,i as P,B as cs,j as ks,C as Ss,E as B,D as ss,G as us}from"./index-BFtI-PwE.js";import{_ as Cs}from"./bannerTichDiem-MSSQEbfp.js";import{d as ws,b as Ms,c as Ls,e as Ps}from"./ProductGuestService-Cb6B-xO9.js";const Bs={class:"product-detail"},As={class:"product-container"},xs={class:"product-image"},$s=["src"],Ds={key:0,class:"thumbnail-list"},Vs=["src","onClick"],Ks={key:1,class:"featured-specs"},Es={class:"featured-specs-grid"},Hs={class:"spec-item"},Ns={class:"spec-value"},Gs={class:"spec-item"},Rs={class:"spec-value"},Xs={class:"spec-item"},qs={class:"spec-value"},Fs={class:"product-right"},Us={class:"product-info"},js={class:"options"},zs={class:"option-list"},Is={class:"options"},Os={class:"option-list"},Qs={key:0,class:"options"},Js={class:"price"},Ws={key:0,class:"old-price"},Ys={class:"current-price"},Zs={key:1,class:"discount-badge"},se={class:"banner-tichDiem"},ee={class:"diemTichLuy"},te={class:"button-group"},ne={class:"spec-modal-header"},ae={class:"spec-tabs-wrapper"},oe={class:"spec-details"},le={class:"spec-section","data-section":"thong-tin-hang-hoa"},ie={class:"spec-row"},ce={class:"spec-value"},ue={class:"spec-row"},re={class:"spec-value"},de={class:"spec-section","data-section":"thiet-ke-trong-luong"},ve={class:"spec-row"},he={class:"spec-value"},pe={class:"spec-row"},ge={class:"spec-value"},me={class:"spec-section","data-section":"bo-xu-ly"},fe={class:"spec-row"},be={class:"spec-value"},_e={class:"spec-section","data-section":"ram"},Te={class:"spec-row"},ye={class:"spec-value"},ke={class:"spec-row"},Se={class:"spec-value"},Ce={class:"spec-section","data-section":"man-hinh"},we={class:"spec-row"},Me={class:"spec-value"},Le={class:"spec-row"},Pe={class:"spec-value"},Be={class:"spec-row"},Ae={class:"spec-value"},xe={class:"spec-row"},$e={class:"spec-value"},De={class:"spec-row"},Ve={class:"spec-value"},Ke={class:"spec-section","data-section":"camera"},Ee={class:"spec-row"},He={class:"spec-value"},Ne={class:"spec-row"},Ge={class:"spec-value"},Re={class:"spec-section","data-section":"pin-sac"},Xe={class:"spec-row"},qe={class:"spec-value"},Fe={class:"spec-row"},Ue={class:"spec-value"},je={class:"spec-row"},ze={class:"spec-value"},Ie={class:"spec-row"},Oe={class:"spec-value"};(function(){var A=document.createElement("script"),O=document.getElementsByTagName("script")[0];A.async=!0,A.src="https://embed.tawk.to/68836581db7610192eeaacd6/1j10k90i5",A.charset="UTF-8",A.setAttribute("crossorigin","*"),O.parentNode.insertBefore(A,O)})();const Qe={__name:"DetailProductGuest",setup(A){const V=_s().params.id,rs=Ts(),y=_(null),m=_(null),f=_(null),x=_(""),n=_(null),o=_(null),$=_(1),b=_("thong-tin-hang-hoa"),d=_(null),X=_(null),q=_(!1),es=t=>t?new Intl.NumberFormat("vi-VN").format(t)+"₫":"0₫",ds=t=>{if(!t)return 0;const s=t*.01;return new Intl.NumberFormat("vi-VN").format(Math.floor(s))},ts=()=>{q.value=!0},ns=()=>{q.value=!1},Q=t=>{if(X.value){const s=X.value.querySelector(`[data-tab="${t}"]`);if(s){const r=X.value,i=s.offsetLeft-20;r.scrollTo({left:Math.max(0,i),behavior:"smooth"}),console.log("Tab scrolled to left:",t,i)}}},w=t=>{b.value=t,Q(t),d.value&&us(()=>{const s=d.value.querySelector(`[data-section="${t}"]`);if(s){const r=d.value,i=81,k=49,c=s.offsetTop,v=c-i-k-10;console.log("Section ID:",t),console.log("Section top:",c),console.log("Scroll to:",v),r.scrollTo({top:Math.max(0,v),behavior:"smooth"})}else console.warn(`Section with data-section="${t}" not found`)})},as=()=>{if(!d.value)return;const t=d.value.scrollTop,s=81,r=49,i=50,k=d.value.querySelectorAll(".spec-section[data-section]");let c="thong-tin-hang-hoa";k.forEach(v=>{const S=v.offsetTop-s-r,M=S+v.offsetHeight;t>=S-i&&t<M-i&&(c=v.getAttribute("data-section"))}),b.value!==c&&(b.value=c,Q(c))},vs=async()=>{var t;try{const s=await ws(V);y.value=s,s.rom.length>0&&(m.value=s.rom[0].id),s.mau.length>0&&(f.value=s.mau[0].id),((t=s.hinhAnh)==null?void 0:t.length)>0&&(x.value=s.hinhAnh[0])}catch(s){console.error("Lỗi khi tải chi tiết sản phẩm:",s)}},hs=async()=>{if(m.value)try{const t=await Ps(V,m.value);o.value=t}catch(t){o.value=null,console.error("Không lấy được thông số:",t)}},os=async()=>{var t;if(!(!m.value||!f.value))try{const s=await Ms(V,f.value,m.value,0);n.value=s,((t=s.hinhAnh)==null?void 0:t.length)>0&&(x.value=s.hinhAnh[0])}catch(s){n.value={soLuong:0},console.error("Không lấy được biến thể:",s)}},ps=async()=>{if(!f.value||!V)return;const t=await Ls(V,f.value);t.length>0&&n.value&&(n.value.hinhAnh=t,x.value=t[0])},ls=async t=>{var s,r,i,k,c,v,S,M,K,E,H,N;try{if(!($!=null&&$.value)||$.value<=0){$.value=1,B.error("Số lượng phải lớn hơn 0!");return}if(!(n!=null&&n.value)||typeof n.value.soLuong!="number"||n.value.soLuong<=0){B.error("Sản phẩm đã hết hàng hoặc không hợp lệ!");return}console.log(n.value);const T=n.value.idSpct,F=n.value.maSanPhamChiTiet,G=$.value,J=n.value.soLuong,U=((s=y.value)==null?void 0:s.tenSanPham)||"Sản phẩm không xác định",j=`${((k=(i=(r=y.value)==null?void 0:r.mau)==null?void 0:i.find(p=>p.id===f.value))==null?void 0:k.ten)||"Mặc định"} - ${((S=(v=(c=y.value)==null?void 0:c.rom)==null?void 0:v.find(p=>p.id===m.value))==null?void 0:S.ten)||"Mặc định"}`,z=((K=(M=n.value)==null?void 0:M.hinhAnh)==null?void 0:K[0])||"/default-image.png",l=((E=n.value)==null?void 0:E.giaBan)??0,h=n.value.soLuong,ms=gs(T,G,h);if(console.log(""),!ss.themVaoGio(T,F,G,U,j,z,l,h)){const p=ss.cartData.value.find(fs=>fs.idSanPhamChiTiet===T);(p==null?void 0:p.soLuong)<2?B.error(`Số lượng vượt quá tồn kho. Đã có ${(p==null?void 0:p.soLuong)||0} sản phẩm trong giỏ.`):B.error("Giới hạn số lượng mua là 2. Đã có 2 sản phẩm trong giỏ.");return}if(t)try{await rs.push({path:"/shopping-cart",query:{selected:T}})}catch(p){console.error("Lỗi chuyển hướng:",p),B.error("Không thể chuyển hướng đến giỏ hàng!")}else B.success("Sản phẩm đã được thêm vào giỏ hàng!")}catch(T){console.error("Lỗi khi thêm sản phẩm vào giỏ hàng:",T),B.error(((N=(H=T.response)==null?void 0:H.data)==null?void 0:N.message)||"Lỗi khi thêm sản phẩm vào giỏ hàng!")}},gs=(t,s,r)=>{const i=ss.cartData.value.find(c=>c.idSanPhamChiTiet===t);return(i?i.soLuong:0)+s<=r};return W([f],()=>{os(),ps()}),W([m],()=>{os(),hs()}),W(q,t=>{t?us(()=>{d.value&&(d.value.scrollTop=0,d.value.addEventListener("scroll",as,{passive:!0}),b.value="thong-tin-hang-hoa",Q("thong-tin-hang-hoa"))}):d.value&&d.value.removeEventListener("scroll",as)}),ys(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),vs()}),(t,s)=>{var v,S,M,K,E,H,N,T,F,G,J,U,j,z;const r=I("el-radio-button"),i=I("el-radio-group"),k=I("router-link"),c=I("el-button");return u(),g("section",Bs,[e("div",As,[e("div",xs,[e("img",{src:x.value||((S=(v=n.value)==null?void 0:v.hinhAnh)==null?void 0:S[0])||"/img/no-image.png",alt:"Hình ảnh sản phẩm",class:"main-image"},null,8,$s),((K=(M=n.value)==null?void 0:M.hinhAnh)==null?void 0:K.length)>0?(u(),g("div",Ds,[(u(!0),g(Y,null,Z(n.value.hinhAnh,(l,h)=>(u(),g("img",{key:h,src:l,class:C(["thumbnail",{active:l===x.value}]),onClick:ms=>x.value=l},null,10,Vs))),128))])):L("",!0),o.value?(u(),g("div",Ks,[e("div",{class:"featured-specs-header"},[s[13]||(s[13]=e("h3",{class:"featured-title"},"Thông số nổi bật",-1)),e("button",{onClick:ts,class:"view-specs-btn"}," Xem thông số ")]),e("div",Es,[e("div",Hs,[s[14]||(s[14]=e("i",{class:"fas fa-microchip spec-icon"},null,-1)),s[15]||(s[15]=e("div",{class:"spec-label"},"Chip",-1)),e("div",Ns,a(o.value.cpu),1)]),e("div",Gs,[s[16]||(s[16]=e("i",{class:"fas fa-tv spec-icon"},null,-1)),s[17]||(s[17]=e("div",{class:"spec-label"},"Màn hình",-1)),e("div",Rs,a(o.value.kichThuoc),1)]),e("div",Xs,[s[18]||(s[18]=e("i",{class:"fas fa-battery-full spec-icon"},null,-1)),s[19]||(s[19]=e("div",{class:"spec-label"},"Thời lượng pin",-1)),e("div",qs,a(o.value.thoiGianSuDung),1)])])])):L("",!0)]),e("div",Fs,[e("div",Us,[e("h1",null,a((E=y.value)==null?void 0:E.tenSanPham)+" - "+a((H=y.value)==null?void 0:H.maXuatXu),1),e("a",{href:"#",class:"danhGia",onClick:s[0]||(s[0]=is((...l)=>t.scrollToReviews&&t.scrollToReviews(...l),["prevent"]))},"Đánh giá"),s[26]||(s[26]=D(" | ")),e("button",{onClick:ts,class:"thong-so-btn"}," Xem thông số "),e("div",js,[s[20]||(s[20]=e("h3",null,"Chọn màu:",-1)),e("div",zs,[R(i,{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=l=>f.value=l)},{default:P(()=>{var l;return[(u(!0),g(Y,null,Z((l=y.value)==null?void 0:l.mau,h=>(u(),cs(r,{key:h.id,label:h.id},{default:P(()=>[D(a(h.ten),1)]),_:2},1032,["label"]))),128))]}),_:1},8,["modelValue"])])]),e("div",Is,[s[21]||(s[21]=e("h3",null,"Chọn ROM:",-1)),e("div",Os,[R(i,{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=l=>m.value=l)},{default:P(()=>{var l;return[(u(!0),g(Y,null,Z((l=y.value)==null?void 0:l.rom,h=>(u(),cs(r,{key:h.id,label:h.id},{default:P(()=>[D(a(h.ten),1)]),_:2},1032,["label"]))),128))]}),_:1},8,["modelValue"])])]),n.value?(u(),g("div",Qs,[e("h3",null,"Số lượng còn: "+a(n.value.soLuong??0),1)])):L("",!0),e("p",Js,[(N=n.value)!=null&&N.giaTruocKhuyenMai&&n.value.giaTruocKhuyenMai!==n.value.giaBan?(u(),g("span",Ws,a(es(n.value.giaTruocKhuyenMai)),1)):L("",!0),e("span",Ys,a(es((T=n.value)==null?void 0:T.giaBan)),1),(F=n.value)!=null&&F.giaTruocKhuyenMai&&n.value.giaTruocKhuyenMai>n.value.giaBan?(u(),g("span",Zs," -"+a(Math.round((n.value.giaTruocKhuyenMai-n.value.giaBan)/n.value.giaTruocKhuyenMai*100))+"% ",1)):L("",!0)]),e("div",se,[R(k,{to:"/client/doiDiem"},{default:P(()=>s[22]||(s[22]=[e("img",{src:Cs,alt:"Banner tích điểm",class:"tich-diem-img"},null,-1)])),_:1})]),e("div",ee,[s[23]||(s[23]=e("i",{class:"fas fa-coins xu-icon"},null,-1)),D(" + "+a(ds((G=n.value)==null?void 0:G.giaBan))+" điểm thưởng ",1)]),e("div",te,[R(c,{type:"primary",disabled:!m.value||!f.value||((J=n.value)==null?void 0:J.soLuong)<=0,class:"buy-btn",onClick:s[3]||(s[3]=l=>ls(!0))},{default:P(()=>s[24]||(s[24]=[D(" Mua ngay ")])),_:1},8,["disabled"]),R(c,{type:"success",icon:ks(Ss),disabled:!m.value||!f.value||((U=n.value)==null?void 0:U.soLuong)<=0,class:"cart-btn",onClick:s[4]||(s[4]=l=>ls(!1))},{default:P(()=>s[25]||(s[25]=[D(" Thêm vào giỏ hàng ")])),_:1},8,["icon","disabled"])])])])]),q.value?(u(),g("div",{key:0,class:"spec-modal-overlay",onClick:ns},[e("div",{class:"spec-modal",onClick:s[12]||(s[12]=is(()=>{},["stop"]))},[e("div",ne,[s[27]||(s[27]=e("h2",null,"Thông số sản phẩm",-1)),s[28]||(s[28]=e("br",null,null,-1)),e("h6",null,a((j=y.value)==null?void 0:j.tenSanPham)+" "+a((z=o.value)==null?void 0:z.rom),1),e("button",{onClick:ns,class:"close-btn"},"×")]),o.value?(u(),g("div",{key:0,class:"spec-modal-content",ref_key:"specModalContent",ref:d},[e("div",ae,[e("div",{class:"spec-tabs",ref_key:"specTabsContainer",ref:X},[e("div",{class:C(["tab-item",{active:b.value==="thong-tin-hang-hoa"}]),onClick:s[5]||(s[5]=l=>w("thong-tin-hang-hoa")),"data-tab":"thong-tin-hang-hoa"}," Thông tin hàng hóa ",2),e("div",{class:C(["tab-item",{active:b.value==="thiet-ke-trong-luong"}]),onClick:s[6]||(s[6]=l=>w("thiet-ke-trong-luong")),"data-tab":"thiet-ke-trong-luong"}," Thiết kế & Trọng lượng ",2),e("div",{class:C(["tab-item",{active:b.value==="bo-xu-ly"}]),onClick:s[7]||(s[7]=l=>w("bo-xu-ly")),"data-tab":"bo-xu-ly"}," Bộ xử lý ",2),e("div",{class:C(["tab-item",{active:b.value==="ram"}]),onClick:s[8]||(s[8]=l=>w("ram")),"data-tab":"ram"}," Lưu trữ ",2),e("div",{class:C(["tab-item",{active:b.value==="man-hinh"}]),onClick:s[9]||(s[9]=l=>w("man-hinh")),"data-tab":"man-hinh"}," Màn hình ",2),e("div",{class:C(["tab-item",{active:b.value==="camera"}]),onClick:s[10]||(s[10]=l=>w("camera")),"data-tab":"camera"}," Camera ",2),e("div",{class:C(["tab-item",{active:b.value==="pin-sac"}]),onClick:s[11]||(s[11]=l=>w("pin-sac")),"data-tab":"pin-sac"}," Pin & Sạc ",2)],512)]),e("div",oe,[e("div",le,[s[31]||(s[31]=e("h3",null,"Thông tin hàng hóa",-1)),e("div",ie,[s[29]||(s[29]=e("span",{class:"spec-label"},"Xuất xứ",-1)),e("span",ce,a(o.value.xuatXu),1)]),e("div",ue,[s[30]||(s[30]=e("span",{class:"spec-label"},"Hệ điều hành",-1)),e("span",re,a(o.value.heDieuHanh),1)])]),e("div",de,[s[34]||(s[34]=e("h3",null,"Thiết kế & Trọng lượng",-1)),e("div",ve,[s[32]||(s[32]=e("span",{class:"spec-label"},"Kích thước",-1)),e("span",he,a(o.value.kichThuoc),1)]),e("div",pe,[s[33]||(s[33]=e("span",{class:"spec-label"},"Chất liệu kính",-1)),e("span",ge,a(o.value.chatLieuKinh),1)])]),e("div",me,[s[36]||(s[36]=e("h3",null,"Bộ xử lý",-1)),e("div",fe,[s[35]||(s[35]=e("span",{class:"spec-label"},"CPU",-1)),e("span",be,a(o.value.cpu),1)])]),e("div",_e,[s[39]||(s[39]=e("h3",null,"Lưu trữ",-1)),e("div",Te,[s[37]||(s[37]=e("span",{class:"spec-label"},"RAM",-1)),e("span",ye,a(o.value.ram),1)]),e("div",ke,[s[38]||(s[38]=e("span",{class:"spec-label"},"ROM",-1)),e("span",Se,a(o.value.rom),1)])]),e("div",Ce,[s[45]||(s[45]=e("h3",null,"Màn hình",-1)),e("div",we,[s[40]||(s[40]=e("span",{class:"spec-label"},"Tên màn hình",-1)),e("span",Me,a(o.value.tenManHinh),1)]),e("div",Le,[s[41]||(s[41]=e("span",{class:"spec-label"},"Loại màn hình",-1)),e("span",Pe,a(o.value.loaiManHinh),1)]),e("div",Be,[s[42]||(s[42]=e("span",{class:"spec-label"},"Độ phân giải",-1)),e("span",Ae,a(o.value.doPhanGiai),1)]),e("div",xe,[s[43]||(s[43]=e("span",{class:"spec-label"},"Tần số quét",-1)),e("span",$e,a(o.value.tanSoQuet),1)]),e("div",De,[s[44]||(s[44]=e("span",{class:"spec-label"},"Độ sáng",-1)),e("span",Ve,a(o.value.doSang),1)])]),e("div",Ke,[s[48]||(s[48]=e("h3",null,"Camera",-1)),e("div",Ee,[s[46]||(s[46]=e("span",{class:"spec-label"},"Camera sau",-1)),e("span",He,a(o.value.cameraSau),1)]),e("div",Ne,[s[47]||(s[47]=e("span",{class:"spec-label"},"Camera trước",-1)),e("span",Ge,a(o.value.cameraTruoc),1)])]),e("div",Re,[s[53]||(s[53]=e("h3",null,"Pin & Sạc",-1)),e("div",Xe,[s[49]||(s[49]=e("span",{class:"spec-label"},"Pin",-1)),e("span",qe,a(o.value.phienBanPin),1)]),e("div",Fe,[s[50]||(s[50]=e("span",{class:"spec-label"},"Công suất sạc",-1)),e("span",Ue,a(o.value.congXuatSac),1)]),e("div",je,[s[51]||(s[51]=e("span",{class:"spec-label"},"Thời gian sử dụng",-1)),e("span",ze,a(o.value.thoiGianSuDung),1)]),e("div",Ie,[s[52]||(s[52]=e("span",{class:"spec-label"},"Số lần sạc tối đa",-1)),e("span",Oe,a(o.value.soLanSacToiDa),1)])])])],512)):L("",!0)])])):L("",!0)])}}},st=bs(Qe,[["__scopeId","data-v-a85d814a"]]);export{st as default};
