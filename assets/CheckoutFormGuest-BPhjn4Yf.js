import{_ as Le,u as Pe,z as Ge,r as t,c as j,w as L,o as te,b as o,d as i,e as a,f as oe,k as p,h as P,t as u,F as N,m as S,v as y,W as J,i as ie,y as ue,U as G,X as re,Y as de,D as Me,S as De,G as Ie}from"./index-I05jmhuU.js";import{l as Ue,t as qe,g as ce,a as Be}from"./MyOrderClient-DquLT7bn.js";import{p as Fe,w as He}from"./ward-CwBRO0K0.js";import{g as Ke,v as Re,c as Xe}from"./PhieuGiamGiaClient-Bkg5j3rZ.js";const Ee={class:"container"},je={class:"checkout-card"},$e={class:"section"},Oe={class:"current-address-display"},Ye={class:"address-name-display"},ze={class:"address-phone-display"},Je={class:"address-phone-display"},Qe={key:0,class:"address-detail-display"},We={key:1,class:"address-detail-display text-gray-400",style:{color:"red"}},Ze={class:"section"},ea={class:"product-item"},aa={class:"product-image-container"},sa=["src","alt"],la={class:"product-info"},na={class:"product-name"},ta={class:"product-type"},oa={class:"product-pricing"},ia={class:"product-price"},ua={class:"quantity-control"},ra=["value"],da={class:"product-subtotal"},ca={key:0,class:"section"},ha={class:"radio-group"},va={class:"radio-option"},pa={class:"radio-content"},ma={class:"shipping-cost"},ga={key:0,class:"radio-option"},ya={class:"radio-content"},fa={class:"shipping-cost"},ba={class:"section"},ka={class:"payment-methods"},_a=["value"],wa=["src","alt"],Ca={class:"summary-section"},Ta={class:"summary-details"},xa={class:"summary-value"},Va={class:"summary-row"},Na={class:"summary-value"},Sa={key:0,class:"summary-row voucher-discount-row"},Aa={class:"summary-value"},La={class:"summary-row total-row"},Pa={class:"summary-value"},Ga={class:"modal-content"},Ma={class:"modal-body"},Da={class:"address-modal-content"},Ia={key:0,class:"form-grid address-form-fields modal-new-address-form"},Ua={key:0,class:"error-text"},qa={key:0,class:"error-text"},Ba={key:0,class:"error-text"},Fa=["value"],Ha={key:0,class:"error-text"},Ka=["disabled"],Ra=["value"],Xa={key:1,class:"error-text"},Ea={key:0,class:"error-text"},ja={class:"modal-content"},$a={class:"modal-body"},Oa={class:"voucher-modal-content"},Ya={class:"voucher-input-group"},za={class:"voucher-list"},Ja={key:0,style:{"text-align":"center","font-style":"italic"}},Qa=["onClick"],Wa={key:0,class:"applied-voucher-info"},Za={class:"applied-voucher-text"},es={class:"applied-voucher-discount"},as={key:1,class:"voucher-error"},he="Hà Nội",ss={__name:"CheckoutFormGuest",setup(ls){const f=Pe(),Q=Ge(),W=t(!1),M=t([]);j(()=>{const s=d.value;return s?[s.soNha,s.tenDuong,s.xaPhuong,s.quanHuyen,s.tinhThanhPho].filter(Boolean).join(", "):""});const A=t(!1),D=t(M.value.length>0?M.value[0].id:"new"),w=t(D.value),ve=t({name:"",phone:"",email:"",address:""}),c=t({name:"",phone:"",email:"",address:""}),d=t({name:"",phone:"",email:"",address:""});L(()=>c.value.name,s=>{d.value.name=s}),L(()=>c.value.phone,s=>{d.value.phone=s}),L(()=>c.value.email,s=>{d.value.email=s});const r=t({}),pe=()=>{var s,e,n,l;return r.value={},(s=c.value.name)!=null&&s.trim()||(r.value.name="Vui lòng nhập họ và tên"),(e=c.value.phone)!=null&&e.trim()?/^0\d{9}$/.test(c.value.phone)||(r.value.phone="Số điện thoại không hợp lệ"):r.value.phone="Vui lòng nhập số điện thoại",(n=c.value.email)!=null&&n.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.value.email)||(r.value.email="Email không hợp lệ"):r.value.email="Vui lòng nhập email",g.value||(r.value.tinh="Vui lòng chọn tỉnh/thành phố"),_.value||(r.value.xa="Vui lòng chọn xã/phường"),(l=X.value)!=null&&l.trim()||(r.value.address="Vui lòng nhập địa chỉ chi tiết"),Object.keys(r.value).length===0};function me(){if(pe()){if(w.value==="new")d.value={...c.value},Z();else{const s=M.value.find(e=>e.id===w.value);s&&(d.value=s)}A.value=!1}}L(D,()=>{Z()});function Z(){var s,e;if(w.value==="new"){const n=[X.value,(s=_.value)==null?void 0:s.name,(e=g.value)==null?void 0:e.name].filter(Boolean).join(", ");d.value={name:c.value.name,phone:c.value.phone,email:c.value.email,address:n}}else{const n=M.value.find(l=>l.id===w.value);n&&(d.value={...n})}Ie(()=>{d.value&&Te()}),A.value=!1}const ge=()=>{r.value={},w.value=D.value,D.value==="new"?c.value={...ve.value}:c.value={name:"",phone:"",email:"",address:""},A.value=!0},ee=()=>{A.value=!1},$=t(!1);t("");const O=t(""),I=t({code:"",discount:0}),Y=t({code:"",discount:0});t("");const ae=t(""),U=t([]),b=t(null),C=t(0),se=async()=>{try{const s=await Ke(O.value,null,H.value);U.value=s.data}catch(s){console.error(s||"Lỗi lấy danh sách phiếu giảm giá")}},z=()=>{$.value=!1},ye=s=>{var n,l,h,v,m;b.value=s,console.log("1",b.value),((n=b.value)==null?void 0:n.loaiGiamGia)==="Phần trăm"?(C.value=H.value*((l=b.value)==null?void 0:l.giaTriGiamGia)/100,((h=b.value)==null?void 0:h.giaTriGiamGiaToiDa)<C.value&&(C.value=(v=b.value)==null?void 0:v.giaTriGiamGiaToiDa)):(m=b.value)!=null&&m.giaTriGiamGia&&(C.value=b.value.giaTriGiamGia);const e={code:s.maGiamGia,discount:C.value};V.value=V.value-e,I.value=e,$.value=!1},q=t(0),T=t(0),x=t("standard");t("");const fe=t(!1),k=t([]);te(()=>{if(Q.query.products)try{const s=JSON.parse(decodeURIComponent(Q.query.products));k.value=Array.isArray(s)?s:[s]}catch(s){console.error("Lỗi parse dữ liệu sản phẩm:",s)}se()}),L(k,s=>{console.log("👀 product thay đổi:",s),console.log("💵 Subtotal mới:",H.value),se()});const B=t({id:"fashion-insurance",name:"Bảo hiểm Thời trang",description:"Bảo vệ sản phẩm được bảo hiểm khỏi thiệt hại do sự cố bất ngờ, tiếp xúc với chất lỏng hoặc hư hỏng trong quá trình sử dụng.",price:1199,quantity:1}),F=j(()=>{switch(x.value){case"standard":return q.value;case"express":return T.value;default:return 0}}),H=j(()=>{var e,n;let s=0;if(Array.isArray(k.value))for(const l of k.value){const h=Number(l.gia)||0,v=Number(l.soLuong)||0;s+=h*v}return fe.value&&((e=B.value)!=null&&e.price)&&((n=B.value)!=null&&n.quantity)&&(s+=Number(B.value.price)*Number(B.value.quantity)),s}),V=j(()=>Number(H.value||0)+Number(F.value||0)-Number(C.value||0));console.log("total",V.value);const be=async()=>{var n;const s={hinhThucThanhToan:R.value,soTienKhachDua:V.value,thanhTien:V.value,phiShip:F.value,shippingMethod:x.value.toUpperCase(),sdtNguoiNhan:d.value.phone,tenNguoiNhan:d.value.name,emailNguoiNhan:d.value.email,diaChiGiaoHang:[d.value.address].filter(Boolean).join(", "),sanPhamRequests:k.value.map(l=>({idSanPham:l.idSanPhamChiTiet,soLuong:l.soLuong})),idPhieuGiamGia:(n=b.value)==null?void 0:n.id};if(console.log("shipping",s),F.value==0){f.warning("Chưa chọn phương thức giao hàng");return}if(!d.value.phone||!d.value.name||!s.diaChiGiaoHang){alert("Vui lòng chọn hoặc nhập địa chỉ giao hàng.");return}W.value=!0;const e=f.info("Đang xử lý đơn hàng...",{timeout:!1,closeButton:!1});try{const l=await qe(s);if(l.data.message==="REDIRECT_VNPAY"){window.location.href=l.data.paymentUrl;return}l.data.message==="Đặt hàng thành công"?(f.dismiss(e),f.success("Đặt hàng thành công"),k.value.forEach(h=>{const v=Me.xoaSanPhamKhoiGio(h.idSanPhamChiTiet)}),De.push({name:"successClient"})):(f.dismiss(e),f.error(l.data.message||"Có lỗi xảy ra"))}catch(l){f.dismiss(e),f.error("Đã xảy ra lỗi. Vui lòng thử lại."),console.error("Lỗi khi thanh toán:",l)}finally{W.value=!1}},K=t([]),R=t(null);t(!1);const ke=async()=>{try{const s=await Ue();K.value=s.data,K.value.length>0&&(R.value=K.value[0].code)}catch(s){console.error("Lỗi khi tải phương thức thanh toán:",s),f.error("Không thể tải các phương thức thanh toán. Vui lòng thử lại sau.")}},_e=s=>{switch(s){case"COD":return Xe;case"VNPAY":return Re;default:return"/icons/default.png"}};te(async()=>{ke()});const le=s=>new Intl.NumberFormat("vi-VN").format(s),g=t(""),_=t(""),X=t(""),we=t(Fe),Ce=t(Object.values(He)),E=t([]);t([]);const Te=async()=>{var e;const s=[(e=g.value)==null?void 0:e.name].filter(Boolean).join(", ");console.log("Địa chỉ người nhận đầy đủ (fullAddress):",s),console.log("Địa chỉ cửa hàng (storeAddress):",he);try{const[n,l]=await Promise.all([ne(he),ne(s)]);console.log("Tọa độ cửa hàng (from):",n),console.log("Tọa độ người nhận (to):",l);const h=await xe(n,l);console.log("Khoảng cách tính được:",h),T.value=Ve(h),q.value=Ne(h),console.log(`Khoảng cách: ${h} km, Phí ship: ${T.value.toLocaleString("vi-VN")} VNĐ`)}catch(n){console.error("Lỗi khi tính phí ship:",n),T.value=5e4,q.value=3e4,console.log("Áp dụng phí mặc định do lỗi: 30,000 VNĐ")}},ne=async s=>{console.log("Đang gọi API lấy tọa độ cho:",s);try{const n=(await ce(s)).data;if(console.log("Phản hồi từ API /geo (địa chỉ gốc):",n),Array.isArray(n)&&n.length>0&&n[0].lat&&n[0].lon){const m={lat:parseFloat(n[0].lat),lon:parseFloat(n[0].lon)};return console.log(`Tọa độ trả về cho ${s}:`,m),m}const l=s.replace(/^,\s*/,"").trim();console.log("Thử định dạng thay thế:",l);const v=(await ce(l)).data;if(console.log("Phản hồi từ API /geo (thay thế):",v),Array.isArray(v)&&v.length>0&&v[0].lat&&v[0].lon){const m={lat:parseFloat(v[0].lat),lon:parseFloat(v[0].lon)};return console.log(`Tọa độ trả về cho ${l}:`,m),m}return console.warn("Không tìm thấy tọa độ hợp lệ cho địa chỉ:",s,n),null}catch(e){return console.error("Lỗi khi lấy tọa độ cho địa chỉ:",s,e),null}},xe=async(s,e)=>{var n,l;if(s.lat===e.lat&&s.lon===e.lon)return console.warn("Hai điểm trùng nhau, khoảng cách = 0 km"),0;try{const v=(await Be(s,e)).data,m=(l=(n=v==null?void 0:v.routes)==null?void 0:n[0])==null?void 0:l.distance;return m!=null?Math.ceil(m/1e3):(console.warn("Không lấy được khoảng cách giữa 2 điểm (kiểm tra parsedData):",v),0)}catch(h){return console.error("Lỗi khi tính khoảng cách giữa 2 điểm:",h),0}},Ve=s=>5e4,Ne=s=>s<=30?3e4:s>=30||s<=50?4e4:s>=50||s<=100?1500*s:s>=100||s<=500?1200*s:1e3*s,Se=async()=>{var s;if(_.value="",E.value=[],(s=g.value)!=null&&s.name)try{E.value=Ce.value.filter(e=>e.path.includes(g.value.name)),console.log("Danh sách Phường/Xã:",E.value)}catch(e){console.error("Lỗi khi lấy danh sách huyện:",e)}},Ae=async()=>{console.log("Xã được chọn:",_.value),T.value=null,_.value&&console.log("Calculating shipping fee after selecting ward:",_.value.name)};return(s,e)=>{var n;return i(),o("div",Ee,[a("div",je,[e[35]||(e[35]=a("h1",{class:"title"},"Thanh Toán",-1)),a("div",$e,[e[14]||(e[14]=a("h2",{class:"section-title"},"Địa chỉ nhận hàng",-1)),a("div",Oe,[a("p",Ye,[e[10]||(e[10]=a("span",{style:{color:"blue"}},"Họ tên:",-1)),P(" "+u(d.value.name||"Chưa có"),1)]),a("p",ze,[e[11]||(e[11]=a("span",{style:{color:"blue"}},"Số điện thoại:",-1)),P(" "+u(d.value.phone||"Chưa có"),1)]),a("p",Je,[e[12]||(e[12]=a("span",{style:{color:"blue"}},"Email:",-1)),P(" "+u(d.value.email||"Chưa có"),1)]),d.value.address?(i(),o("p",Qe,[e[13]||(e[13]=a("span",{style:{color:"blue"}},"Địa chỉ nhận hàng: ",-1)),P(u(d.value.address),1)])):(i(),o("p",We," Chưa có địa chỉ nhận hàng ")),a("button",{onClick:ge,class:"change-button"},"Thay đổi địa chỉ")])]),a("div",Ze,[e[19]||(e[19]=a("h2",{class:"section-title"},"Sản phẩm",-1)),e[20]||(e[20]=a("i",{style:{color:"#d32f2f"}}," Theo chính sách của cửa hàng, chỉ những khách hàng đã đăng nhập/đăng ký tài khoản mới được hưởng quyền lợi đổi trả và bảo hành sản phẩm. Rất mong quý khách thông cảm. ",-1)),e[21]||(e[21]=a("br",null,null,-1)),e[22]||(e[22]=a("i",{style:{color:"#d32f2f"}}," Quý khách vui lòng đăng nhập hoặc đăng ký tài khoản để được áp dụng đầy đủ chính sách đổi trả và bảo hành khi mua sản phẩm. ",-1)),e[23]||(e[23]=a("br",null,null,-1)),e[24]||(e[24]=a("br",null,null,-1)),(i(!0),o(N,null,S(k.value,l=>(i(),o("div",{class:"product-item-wrapper",key:l.idGioHangChiTiet},[a("div",ea,[e[18]||(e[18]=a("input",{type:"checkbox",class:"product-checkbox",checked:"",disabled:""},null,-1)),a("div",aa,[a("img",{src:l.imageUrl,alt:l.tenSanPham,class:"product-image"},null,8,sa)]),a("div",la,[a("div",na,u(l.tenSanPham),1),a("div",ta,u(l.phienBan),1)]),a("div",oa,[a("div",ia,"₫"+u(l.gia.toLocaleString()),1),a("div",ua,[e[15]||(e[15]=a("button",{class:"quantity-button"},"-",-1)),a("input",{type:"text",value:l.soLuong,class:"quantity-input",readonly:""},null,8,ra),e[16]||(e[16]=a("button",{class:"quantity-button"},"+",-1))]),a("div",da," ₫"+u((l.gia*l.soLuong).toLocaleString()),1),e[17]||(e[17]=a("button",{class:"delete-button"},null,-1))])])]))),128)),e[25]||(e[25]=a("div",{class:"separator"},null,-1))]),d.value.address?(i(),o("div",ca,[e[28]||(e[28]=a("h2",{class:"section-title"},"Phương thức vận chuyển",-1)),a("div",ha,[a("label",va,[a("div",pa,[y(a("input",{type:"radio",name:"shipping-method",value:"standard","onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),class:"radio-field"},null,512),[[J,x.value]]),e[26]||(e[26]=a("span",null,"Vận chuyển tiêu chuẩn",-1))]),a("span",ma," đ"+u(le(q.value)),1)]),g.value.name&&((n=g.value)==null?void 0:n.name.toLowerCase())==="hà nội"?(i(),o("label",ga,[a("div",ya,[y(a("input",{type:"radio",name:"shipping-method",value:"express","onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l),class:"radio-field"},null,512),[[J,x.value]]),e[27]||(e[27]=a("span",null,"Vận chuyển nhanh",-1))]),a("span",fa," ₫"+u(le(T.value)),1)])):p("",!0)])])):p("",!0),a("div",ba,[e[29]||(e[29]=a("h2",{class:"section-title"},"Phương thức thanh toán",-1)),a("div",ka,[(i(!0),o(N,null,S(K.value,l=>(i(),o("label",{class:"payment-method-option",key:l.code},[y(a("input",{type:"radio",name:"paymentMethod",value:l.code,"onUpdate:modelValue":e[2]||(e[2]=h=>R.value=h)},null,8,_a),[[J,R.value]]),a("img",{src:_e(l.code),alt:l.displayName,class:"payment-icon"},null,8,wa),a("span",null,u(l.displayName),1)]))),128))])]),a("div",Ca,[e[34]||(e[34]=a("h2",{class:"section-title"},"Tổng cộng",-1)),a("div",Ta,[(i(!0),o(N,null,S(k.value,l=>(i(),o("div",{class:"summary-row",key:l.id},[e[30]||(e[30]=a("span",null,"Tổng tiền sản phẩm:",-1)),a("span",xa,"₫"+u((l.gia*l.soLuong).toLocaleString()),1)]))),128)),a("div",Va,[e[31]||(e[31]=a("span",null,"Phí vận chuyển:",-1)),a("span",Na,"₫"+u(F.value.toLocaleString()),1)]),I.value.code?(i(),o("div",Sa,[a("span",null,"Giảm giá Voucher ("+u(I.value.code)+"):",1),a("span",Aa,"- ₫"+u(I.value.discount.toLocaleString()),1)])):p("",!0),e[33]||(e[33]=a("div",{class:"separator my-2"},null,-1)),a("div",La,[e[32]||(e[32]=a("span",null,"Tổng thanh toán:",-1)),a("span",Pa,"₫"+u(V.value.toLocaleString()),1)])]),a("button",{onClick:be,class:"buy-button"}," Mua hàng ")])]),oe(de,{name:"modal-fade"},{default:ie(()=>[A.value?(i(),o("div",{key:0,class:"modal-overlay",onClick:ue(ee,["self"])},[a("div",Ga,[a("div",Ma,[a("div",Da,[w.value==="new"?(i(),o("div",Ia,[a("div",null,[e[36]||(e[36]=a("label",{for:"modal-name",class:"label"},"Họ và tên",-1)),y(a("input",{id:"modal-name","onUpdate:modelValue":e[3]||(e[3]=l=>c.value.name=l),type:"text",placeholder:"Nhập họ và tên",class:"input-field"},null,512),[[G,c.value.name]]),r.value.name?(i(),o("span",Ua,u(r.value.name),1)):p("",!0)]),a("div",null,[e[37]||(e[37]=a("label",{for:"modal-phone",class:"label"},"Số điện thoại",-1)),y(a("input",{id:"modal-phone","onUpdate:modelValue":e[4]||(e[4]=l=>c.value.phone=l),type:"tel",placeholder:"Nhập số điện thoại",class:"input-field"},null,512),[[G,c.value.phone]]),r.value.phone?(i(),o("span",qa,u(r.value.phone),1)):p("",!0)]),a("div",null,[e[38]||(e[38]=a("label",{for:"modal-phone",class:"label"},"Email",-1)),y(a("input",{id:"modal-email","onUpdate:modelValue":e[5]||(e[5]=l=>c.value.email=l),type:"tel",placeholder:"Nhập email người nhận",class:"input-field"},null,512),[[G,c.value.email]]),r.value.email?(i(),o("span",Ba,u(r.value.email),1)):p("",!0)]),e[42]||(e[42]=a("label",null,"Chọn tỉnh:",-1)),y(a("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>g.value=l),onChange:Se,class:"select-box"},[e[39]||(e[39]=a("option",{disabled:"",value:""},"-- Tỉnh/Thành phố --",-1)),(i(!0),o(N,null,S(we.value,l=>(i(),o("option",{key:l.code,value:l},u(l.name),9,Fa))),128))],544),[[re,g.value]]),r.value.tinh?(i(),o("span",Ha,u(r.value.tinh),1)):p("",!0),e[43]||(e[43]=a("label",null,"Chọn Xã:",-1)),y(a("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>_.value=l),onChange:Ae,class:"select-box",disabled:!g.value},[e[40]||(e[40]=a("option",{disabled:"",value:""},"-- Phường/Xã --",-1)),(i(!0),o(N,null,S(E.value,l=>(i(),o("option",{key:l.code,value:l},u(l.name),9,Ra))),128))],40,Ka),[[re,_.value]]),r.value.xa?(i(),o("span",Xa,u(r.value.xa),1)):p("",!0),a("div",null,[e[41]||(e[41]=a("label",{for:"modal-address",class:"label"},"Địa chỉ",-1)),y(a("input",{id:"modal-address","onUpdate:modelValue":e[8]||(e[8]=l=>X.value=l),type:"text",placeholder:"Nhập địa chỉ chi tiết",class:"input-field"},null,512),[[G,X.value]]),r.value.address?(i(),o("span",Ea,u(r.value.address),1)):p("",!0)])])):p("",!0)])]),a("div",{class:"modal-footer"},[a("button",{onClick:me,class:"apply-button"},"Xác nhận"),a("button",{onClick:ee,class:"cancel-button"},"Hủy")])])])):p("",!0)]),_:1}),oe(de,{name:"modal-fade"},{default:ie(()=>[$.value?(i(),o("div",{key:0,class:"modal-overlay",onClick:ue(z,["self"])},[a("div",ja,[a("div",{class:"modal-header"},[e[45]||(e[45]=a("h3",{class:"modal-title"},"Áp dụng mã giảm giá",-1)),a("button",{class:"modal-close-button",onClick:z},e[44]||(e[44]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-x"},[a("path",{d:"M18 6 6 18"}),a("path",{d:"m6 6 12 12"})],-1)]))]),a("div",$a,[a("div",Oa,[a("div",Ya,[U.value?y((i(),o("input",{key:0,"onUpdate:modelValue":e[9]||(e[9]=l=>O.value=l),type:"text",placeholder:"Nhập mã giảm giá",class:"input-field flex-grow"},null,512)),[[G,O.value]]):p("",!0)]),a("ul",za,[U.value?p("",!0):(i(),o("p",Ja," Khách hàng không có giảm giá nào ")),(i(!0),o(N,null,S(U.value,l=>(i(),o("li",{key:l.id,class:"voucher-item"},[a("div",null,[a("strong",null,u(l.tenGiamGia),1),a("small",null,"Giảm: "+u(l.giaTriGiamGia)+"%",1)]),a("button",{onClick:h=>ye(l),class:"apply-button"}," Áp dụng ",8,Qa)]))),128))]),Y.value.code?(i(),o("div",Wa,[a("span",Za,[e[46]||(e[46]=P("Mã đã áp dụng: ")),a("strong",null,u(Y.value.code),1)]),a("span",es,"- ₫"+u(Y.value.discount.toLocaleString()),1)])):p("",!0),ae.value?(i(),o("div",as,u(ae.value),1)):p("",!0)])]),a("div",{class:"modal-footer"},[a("button",{onClick:z,class:"apply-button"},"Đóng")])])])):p("",!0)]),_:1})])}}},us=Le(ss,[["__scopeId","data-v-4fc72edf"]]);export{us as default};
