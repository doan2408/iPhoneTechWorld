import{a6 as F,a7 as $,a8 as J,a9 as W}from"./ProductAdminService-Cqy2_DSd.js";import{_ as Y,r as m,T as S,u as Z,o as ee,w as ne,a as h,b as te,d as le,f as e,e as k,i as t,h as y,j as w,a6 as ae,l as oe,t as re,R as L}from"./index-BFtI-PwE.js";const ie={class:"container mt-4"},se={class:"table-responsive mb-4",style:{"margin-top":"20px"}},ue={class:"action-buttons-horizontal"},he={class:"pagination-fixed"},ce={class:"d-flex justify-content-center align-items-center gap-3"},V=5,de={__name:"ManHinhAdmin",setup(me){const T=m([]),g=m(1),K=m(1),H=m(0),b=m(""),f=m(!1),v=m(!1),B=m(null),x=m(""),M=S({}),r=Z(),a=S({id:null,tenManHinh:"",kichThuoc:"",loaiManHinh:"",doPhanGiai:"",tanSoQuet:"",doSang:"",chatLieuKinh:""}),P={tenManHinh:[{required:!0,message:"Vui lòng nhập tên màn hình",trigger:"blur"},{max:50,message:"Tên màn hình không được vượt quá 50 ký tự",trigger:"blur"}],kichThuoc:[{required:!0,message:"Không được để trống kích thước",trigger:"blur"},{max:50,message:"Kích thước không được vượt quá 50 ký tự",trigger:"blur"}],loaiManHinh:[{required:!0,message:"Vui lòng chọn loại màn hình",trigger:"blur"},{max:50,message:"Loại màn hình không được vượt quá 50 ký tự",trigger:"blur"}],doPhanGiai:[{required:!0,message:"Vui lòng nhập độ phân giải",trigger:"blur"},{max:50,message:"Độ phân giải không được vượt quá 50 ký tự",trigger:"blur"}],tanSoQuet:[{required:!0,message:"Vui lòng nhập tần số quét",trigger:"blur"},{max:50,message:"Tần số quét không được vượt quá 50 ký tự",trigger:"blur"}],doSang:[{required:!0,message:"Vui lòng nhập độ sáng",trigger:"blur"},{max:50,message:"Độ sáng không được vượt quá 50 ký tự",trigger:"blur"}],chatLieuKinh:[{required:!0,message:"Vui lòng nhập chất liệu kính",trigger:"blur"},{max:50,message:"Chất liệu kính không được vượt quá 50 ký tự",trigger:"blur"}]},_=async()=>{try{const l=await F(g.value-1,V,x.value.trim()||null);T.value=l.content,K.value=l.totalPages,H.value=l.totalElements}catch(l){console.error("Không thể load dữ liệu:",l),r.error("Không thể tải dữ liệu")}},C=()=>{b.value="",x.value="",g.value=1,_()},N=()=>{C()},j=()=>{try{q(),f.value=!0,v.value=!1}catch(l){console.error("Lỗi khi mở form tạo mới:",l),r.error("Không thể mở form tạo mới")}},D=async()=>{Object.keys(M).forEach(l=>delete M[l]);try{await L.confirm(v.value?"Bạn có chắc chắn muốn cập nhật màn hình này?":"Bạn có chắc chắn muốn thêm màn hình mới?","Xác nhận",{confirmButtonText:"Đồng ý",cancelButtonText:"Hủy",type:"warning"}),v.value?(await J(a.id,a),r.success("Cập nhật thành công!")):(await W(a),r.success("Thêm mới thành công!")),q(),f.value=!1,_()}catch(l){if(l==="cancel"||(l==null?void 0:l.message)==="cancel"){r.info("Hủy thao tác");return}if(l.response&&l.response.data){const{statusCode:n,message:s,error:i,errors:c}=l.response.data;if(c){const u=Object.values(c).flat().join(`
`);r.error(u)}else if(s)if(typeof s=="object"){const u=Object.values(s).join(`
`);r.error(u)}else r.error(s);else i?r.error(typeof i=="string"?i:JSON.stringify(i)):r.error("Dữ liệu không hợp lệ, vui lòng kiểm tra lại!")}else if(l.response){const n=l.response.status;n===401?r.error("Bạn không có quyền thực hiện hành động này!"):n===403?r.error("Bạn không có quyền truy cập tài nguyên này!"):r.error("Đã xảy ra lỗi, vui lòng thử lại!")}else r.error("Không thể kết nối đến server!")}},E=()=>{f.value=!1},G=l=>{v.value=!0,Object.assign(a,l),f.value=!0},U=async l=>{try{await L.confirm("Bạn có chắc chắn muốn xóa không?","Xác nhận",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await $(l),r.success("Xóa thành công"),_()}catch(n){n==="cancel"||(n==null?void 0:n.message)==="cancel"?r.info("Hủy thao tác"):(console.error("Lỗi khi xóa:",n),r.error("Xóa thất bại"))}},O=l=>(g.value-1)*V+l+1,Q=l=>{g.value=l,_()},q=()=>{a.id=null,a.tenManHinh="",a.kichThuoc="",a.loaiManHinh="",a.doPhanGiai="",a.tanSoQuet="",a.doSang="",a.chatLieuKinh=""};return ee(()=>{_()}),ne(b,()=>{x.value=b.value.trim(),g.value=1,_()}),(l,n)=>{const s=h("el-input"),i=h("el-col"),c=h("el-button"),u=h("el-row"),d=h("el-table-column"),R=h("el-table"),X=h("el-pagination"),p=h("el-form-item"),z=h("el-form"),A=h("el-dialog");return le(),te("div",ie,[e(u,{gutter:20,class:"mb-4",align:"middle"},{default:t(()=>[e(i,{span:8},{default:t(()=>[e(s,{modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=o=>b.value=o),placeholder:"Tìm kiếm theo tên, loại màn hình, tần số quét...",clearable:"","prefix-icon":"Search",onClear:C},null,8,["modelValue"])]),_:1}),e(i,{span:16,class:"text-right",align:"right"},{default:t(()=>[e(c,{type:"primary",onClick:j},{default:t(()=>n[9]||(n[9]=[y("Tạo mới")])),_:1}),e(c,{type:"primary",onClick:N},{default:t(()=>n[10]||(n[10]=[y("Làm mới")])),_:1})]),_:1})]),_:1}),n[12]||(n[12]=k("h2",null,"Danh sách màn hình",-1)),k("div",se,[e(R,{data:T.value,border:"",style:{width:"100%"}},{default:t(()=>[e(d,{type:"index",index:O,label:"STT",width:"80"}),e(d,{prop:"tenManHinh",label:"Tên màn hình"}),e(d,{prop:"kichThuoc",label:"Kích thước"}),e(d,{prop:"loaiManHinh",label:"Loại màn hình"}),e(d,{prop:"doPhanGiai",label:"Độ phân giải"}),e(d,{prop:"tanSoQuet",label:"Tần số quét"}),e(d,{prop:"doSang",label:"Độ sáng"}),e(d,{prop:"chatLieuKinh",label:"Chất liệu kính"}),e(d,{label:"Thao tác",width:"180"},{default:t(({row:o})=>[k("div",ue,[e(c,{type:"primary",icon:w(ae),circle:"",onClick:I=>G(o)},null,8,["icon","onClick"]),e(c,{type:"danger",icon:w(oe),circle:"",onClick:I=>U(o.id)},null,8,["icon","onClick"])])]),_:1})]),_:1},8,["data"])]),k("div",he,[k("div",ce,[e(X,{background:"",layout:"prev, pager, next","page-size":V,"current-page":g.value,total:H.value,"pager-count":7,"prev-text":"< Trước","next-text":"Sau >",onCurrentChange:Q},null,8,["current-page","total"])])]),e(A,{modelValue:f.value,"onUpdate:modelValue":n[8]||(n[8]=o=>f.value=o),title:v.value?"Chỉnh sửa màn hình":"Thêm mới màn hình",width:"900px","close-on-click-modal":!1,"destroy-on-close":!0},{default:t(()=>[e(z,{model:a,ref_key:"formRef",ref:B,rules:P,"label-width":"140px","label-position":"left",class:"hdh-form"},{default:t(()=>[e(u,{gutter:20},{default:t(()=>[e(i,{span:12},{default:t(()=>[e(p,{label:"Tên màn hình",prop:"tenManHinh"},{default:t(()=>[e(s,{modelValue:a.tenManHinh,"onUpdate:modelValue":n[1]||(n[1]=o=>a.tenManHinh=o),placeholder:"Nhập tên màn hình (ví dụ: AMOLED, Retina, Dynamic Island...)",autocomplete:"on"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(p,{label:"Kích thước",prop:"kichThuoc"},{default:t(()=>[e(s,{modelValue:a.kichThuoc,"onUpdate:modelValue":n[2]||(n[2]=o=>a.kichThuoc=o),placeholder:"Nhập kích thước (ví dụ: 6.5 inch)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{gutter:20},{default:t(()=>[e(i,{span:12},{default:t(()=>[e(p,{label:"Loại màn hình",prop:"loaiManHinh"},{default:t(()=>[e(s,{modelValue:a.loaiManHinh,"onUpdate:modelValue":n[3]||(n[3]=o=>a.loaiManHinh=o),placeholder:"Nhập loại màn hình (ví dụ: OLED, IPS, LCD)"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(p,{label:"Độ phân giải",prop:"doPhanGiai"},{default:t(()=>[e(s,{modelValue:a.doPhanGiai,"onUpdate:modelValue":n[4]||(n[4]=o=>a.doPhanGiai=o),placeholder:"Nhập độ phân giải (ví dụ: 1080 x 2400 pixels)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{gutter:20},{default:t(()=>[e(i,{span:12},{default:t(()=>[e(p,{label:"Tần số quét",prop:"tanSoQuet"},{default:t(()=>[e(s,{modelValue:a.tanSoQuet,"onUpdate:modelValue":n[5]||(n[5]=o=>a.tanSoQuet=o),placeholder:"Nhập tần số quét (ví dụ: 120Hz)"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(p,{label:"Độ sáng",prop:"doSang"},{default:t(()=>[e(s,{modelValue:a.doSang,"onUpdate:modelValue":n[6]||(n[6]=o=>a.doSang=o),placeholder:"Nhập độ sáng (ví dụ: 1000 nits)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{gutter:20},{default:t(()=>[e(i,null,{default:t(()=>[e(p,{label:"Chất liệu kính",prop:"chatLieuKinh"},{default:t(()=>[e(s,{modelValue:a.chatLieuKinh,"onUpdate:modelValue":n[7]||(n[7]=o=>a.chatLieuKinh=o),placeholder:"Nhập chất liệu kính (ví dụ: Gorilla Glass Victus)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{justify:"end",style:{"margin-top":"30px"}},{default:t(()=>[e(c,{onClick:E,style:{"margin-right":"10px"}},{default:t(()=>n[11]||(n[11]=[y("Hủy")])),_:1}),e(c,{type:"primary",onClick:D},{default:t(()=>[y(re(v.value?"Cập nhật":"Lưu"),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},fe=Y(de,[["__scopeId","data-v-567c6eed"]]);export{fe as default};
