import{_ as N,H as T,c as S,r as m,o as V,w as x,b as u,d as r,e as l,k as d,t as n,v as h,U as f,X as E,R as U,E as b}from"./index-BFtI-PwE.js";import{d as w,u as B}from"./NhanVienServices-WPOe5WOD.js";const M={class:"profile-container"},H={key:0,class:"loading"},D={class:"profile-card"},I={key:0},L={class:"profile-item"},P={class:"profile-item"},j={class:"profile-item"},A={class:"profile-item"},G={class:"profile-item"},K={class:"profile-item"},O={class:"profile-item"},X={key:1,class:"edit-form"},R={class:"form-group"},q={key:0,class:"text-danger mb-1"},z={class:"form-group"},F={key:0,class:"text-danger mb-1"},J={class:"form-group"},Q={key:0,class:"text-danger mb-1"},W={class:"form-group"},Y={key:0,class:"text-danger mb-1"},Z={class:"form-group"},$={key:0,class:"text-danger mb-1"},ee={class:"form-group"},le={key:0,class:"text-danger mb-1"},te={class:"button-group"},ae=["disabled"],ie=["disabled"],ne={__name:"PrivateInformation",setup(se){const y=T(),c=S(()=>y.getters.user||null),o=m({}),v=m(!1),p=m(!1),t=m({}),a=m({tenNhanVien:"",email:"",sdt:"",diaChi:"",ngaySinh:"",gioiTinh:""}),g=async()=>{var s;try{p.value=!0,t.value={};const e=(s=c.value)==null?void 0:s.id;if(!e)throw new Error("Không tìm thấy ID người dùng");const i=await w(e);o.value={...i},a.value={...o.value}}catch(e){t.value=e.message||"Lỗi khi tải thông tin người dùng",console.error("Error loading user profile:",e)}finally{p.value=!1}};V(()=>{var s;(s=c.value)!=null&&s.id&&g()}),x(()=>v.value,s=>{s&&(a.value={...o.value})});const _=()=>{v.value=!v.value,Object.keys(t.value).forEach(s=>delete t.value[s]),v.value||(a.value={...o.value})},C=async()=>{var s;Object.keys(t.value).forEach(e=>delete t.value[e]);try{await U.confirm("Bạn có chắc chắn muốn lưu thay đổi không?","Xác nhận",{confirmButtonText:"Lưu",cancelButtonText:"Hủy",type:"warning"}),p.value=!0,console.log("Saving current user profile:",a.value);const e=(s=c.value)==null?void 0:s.id,i=await B(e,a.value);g(),b.success("Update thành công"),v.value=!1}catch(e){if(e==="cancel"||e==="close")return;Array.isArray(e)?e.forEach(({field:i,message:k})=>{t.value[i]=k}):b.error("Update thông tin thất bại")}finally{p.value=!1}};return(s,e)=>(r(),u("div",M,[e[20]||(e[20]=l("h2",{class:"profile-title"},"Thông Tin Cá Nhân",-1)),p.value?(r(),u("div",H,"Đang tải...")):d("",!0),l("div",D,[v.value?d("",!0):(r(),u("div",I,[l("div",L,[e[6]||(e[6]=l("label",null,"Tài khoản:",-1)),l("p",null,n(o.value.taiKhoan||"Chưa cập nhật"),1)]),l("div",P,[e[7]||(e[7]=l("label",null,"Họ và Tên:",-1)),l("p",null,n(o.value.tenNhanVien||"Chưa cập nhật"),1)]),l("div",j,[e[8]||(e[8]=l("label",null,"Email:",-1)),l("p",null,n(o.value.email||"Chưa cập nhật"),1)]),l("div",A,[e[9]||(e[9]=l("label",null,"Số Điện Thoại:",-1)),l("p",null,n(o.value.sdt||"Chưa cập nhật"),1)]),l("div",G,[e[10]||(e[10]=l("label",null,"Địa Chỉ:",-1)),l("p",null,n(o.value.diaChi||"Chưa cập nhật"),1)]),l("div",K,[e[11]||(e[11]=l("label",null,"Ngày Sinh:",-1)),l("p",null,n(o.value.namSinh||"Chưa cập nhật"),1)]),l("div",O,[e[12]||(e[12]=l("label",null,"Giới Tính:",-1)),l("p",null,n(o.value.gioiTinh===!0?"Nam":"Nữ"),1)])])),v.value?(r(),u("div",X,[l("div",R,[t.value.tenNhanVien?(r(),u("div",q,n(t.value.tenNhanVien),1)):d("",!0),e[13]||(e[13]=l("label",null,"Họ và Tên:",-1)),h(l("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.tenNhanVien=i),placeholder:"Nhập họ và tên",class:"form-input"},null,512),[[f,a.value.tenNhanVien]])]),l("div",z,[t.value.email?(r(),u("div",F,n(t.value.email),1)):d("",!0),e[14]||(e[14]=l("label",null,"Email:",-1)),h(l("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.email=i),type:"email",placeholder:"Nhập email",class:"form-input"},null,512),[[f,a.value.email]])]),l("div",J,[t.value.sdt?(r(),u("div",Q,n(t.value.sdt),1)):d("",!0),e[15]||(e[15]=l("label",null,"Số Điện Thoại:",-1)),h(l("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.sdt=i),placeholder:"Nhập số điện thoại",class:"form-input"},null,512),[[f,a.value.sdt]])]),l("div",W,[t.value.diaChi?(r(),u("div",Y,n(t.value.diaChi),1)):d("",!0),e[16]||(e[16]=l("label",null,"Địa Chỉ:",-1)),h(l("input",{"onUpdate:modelValue":e[3]||(e[3]=i=>a.value.diaChi=i),placeholder:"Nhập địa chỉ",class:"form-input"},null,512),[[f,a.value.diaChi]])]),l("div",Z,[t.value.namSinh?(r(),u("div",$,n(t.value.namSinh),1)):d("",!0),e[17]||(e[17]=l("label",null,"Ngày Sinh:",-1)),h(l("input",{"onUpdate:modelValue":e[4]||(e[4]=i=>a.value.namSinh=i),type:"date",class:"form-input"},null,512),[[f,a.value.namSinh]])]),l("div",ee,[t.value.gioiTinh?(r(),u("div",le,n(t.value.gioiTinh),1)):d("",!0),e[19]||(e[19]=l("label",null,"Giới Tính:",-1)),h(l("select",{"onUpdate:modelValue":e[5]||(e[5]=i=>a.value.gioiTinh=i),class:"form-input"},e[18]||(e[18]=[l("option",{value:"",disabled:""},"Chọn giới tính",-1),l("option",{value:"true"},"Nam",-1),l("option",{value:"false"},"Nữ",-1)]),512),[[E,a.value.gioiTinh]])])])):d("",!0),l("div",te,[l("button",{class:"edit-button",onClick:_,disabled:p.value},n(v.value?"Hủy":"Chỉnh Sửa"),9,ae),v.value?(r(),u("button",{key:0,class:"save-button",onClick:C,disabled:p.value}," Lưu Thay Đổi ",8,ie)):d("",!0)])])]))}},re=N(ne,[["__scopeId","data-v-ca5d2be6"]]);export{re as default};
