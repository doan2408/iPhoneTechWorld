import{as as Q,at as W,au as Y,av as ee}from"./ProductAdminService-BjtVeFMT.js";import{_ as ae,r,T as G,aj as D,c as L,o as le,w as M,a as i,b as oe,d as te,f as e,e as y,i as l,h as x,t as ne,ao as re,l as ue,a6 as ie,R as se,E as g}from"./index-I05jmhuU.js";const ce={class:"container mt-4"},de={class:"table-responsive mb-4",style:{"margin-top":"20px"}},me={class:"action-buttons-horizontal"},pe={class:"pagination-fixed"},he={class:"d-flex justify-content-center align-items-center gap-3"},ge={__name:"CameraTruocAdmin",setup(fe){const p=r(!1),f=r(!1),w=r(!1),t=G({id:null,loaiCamera:"",doPhanGiai:"",khauDo:"",loaiZoom:"",cheDoChup:""}),T=r([]),s=r(1),U=r(1),V=r(0),_=r(5),P=r(null),v=r(""),k=r(""),Z=G({}),E={Edit:D(ie),Delete:D(ue),View:D(re)},S={loaiCamera:[{required:!0,message:"Vui lòng nhập loại camera",trigger:"blur"}],doPhanGiai:[{required:!0,message:"Vui lòng nhập độ phân giải",trigger:"blur"}],khauDo:[{required:!0,message:"Vui lòng nhập khẩu độ",trigger:"blur"}],loaiZoom:[{required:!0,message:"Vui lòng nhập loại zoom",trigger:"blur"}],cheDoChup:[{required:!0,message:"Vui lòng nhập chế độ chụp",trigger:"blur"}]};L(()=>V.value===0?0:(s.value-1)*_.value+1),L(()=>Math.min(s.value*_.value,V.value));const h=async()=>{try{const o=await Q(s.value-1,_.value,k.value.trim()||null);T.value=o.content,U.value=o.totalPages,V.value=o.totalElements}catch(o){console.error("Không thể load dữ liệu:",o)}},z=()=>{Object.assign(t,{id:null,loaiCamera:"",doPhanGiai:"",khauDo:"",loaiZoom:"",cheDoChup:""})},j=()=>{B()},B=()=>{v.value="",k.value="",s.value=1,h()},q=()=>{p.value=!1},A=()=>{z(),f.value=!1,p.value=!0},N=async()=>{var o,a;w.value=!0;try{await P.value.validate(),f.value?(await Y(t.id,t),g.success("Cập nhật camera trước thành công!")):(await ee(t),g.success("Thêm camera trước thành công!")),z(),p.value=!1,h()}catch(u){(a=(o=u.response)==null?void 0:o.data)!=null&&a.message,Array.isArray(u)&&u.forEach(({field:c,message:d})=>{g.error(Z[c]=d)})}finally{w.value=!1}},R=o=>{f.value=!0,Object.assign(t,o),p.value=!0},K=o=>(s.value-1)*_.value+o+1,X=o=>{s.value=o},O=async o=>{try{await se.confirm("Bạn có chắc chắn muốn xoá mục này?","Xác nhận",{confirmButtonText:"Xoá",cancelButtonText:"Huỷ",type:"warning"}),await W(o),g.success("Xoá thành công"),h()}catch(a){a==="cancel"?g.info("Đã huỷ xoá"):g.error("Xoá thất bại")}};return le(()=>{h()}),M(s,()=>{h()}),M(v,()=>{k.value=v.value.trim(),s.value=1,h()}),(o,a)=>{const u=i("el-input"),c=i("el-col"),d=i("el-button"),C=i("el-row"),m=i("el-table-column"),F=i("el-table"),H=i("el-pagination"),b=i("el-form-item"),I=i("el-form"),$=i("el-dialog");return te(),oe("div",ce,[e(C,{gutter:20,class:"mb-4",align:"middle"},{default:l(()=>[e(c,{span:8},{default:l(()=>[e(u,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=n=>v.value=n),placeholder:"Tìm kiếm theo loại, ",clearable:"","prefix-icon":"Search",onClear:B},null,8,["modelValue"])]),_:1}),e(c,{span:16,class:"text-right",align:"right"},{default:l(()=>[e(d,{type:"primary",onClick:A},{default:l(()=>a[7]||(a[7]=[x("Tạo mới")])),_:1}),e(d,{type:"primary",onClick:j},{default:l(()=>a[8]||(a[8]=[x("Làm mới")])),_:1})]),_:1})]),_:1}),a[10]||(a[10]=y("h2",null,"Danh sách camera trước",-1)),y("div",de,[e(F,{data:T.value,border:"",style:{width:"100%"}},{default:l(()=>[e(m,{type:"index",index:K,label:"STT",width:"80"}),e(m,{prop:"loaiCamera",label:"Loại camera"}),e(m,{prop:"doPhanGiai",label:"Độ phân giải"}),e(m,{prop:"khauDo",label:"Khẩu độ"}),e(m,{prop:"loaiZoom",label:"Loại zoom"}),e(m,{prop:"cheDoChup",label:"Chế độ chụp"}),e(m,{label:"Thao tác",width:"180"},{default:l(({row:n})=>[y("div",me,[e(d,{type:"primary",icon:E.Edit,circle:"",onClick:J=>R(n)},null,8,["icon","onClick"]),e(d,{type:"danger",icon:E.Delete,circle:"",onClick:J=>O(n.id)},null,8,["icon","onClick"])])]),_:1})]),_:1},8,["data"])]),y("div",pe,[y("div",he,[e(H,{background:"",layout:"prev, pager, next","page-size":_.value,"current-page":s.value,total:V.value,"pager-count":7,"prev-text":"< Trước","next-text":"Sau >",onCurrentChange:X},null,8,["page-size","current-page","total"])])]),e($,{modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=n=>p.value=n),title:f.value?"Chỉnh sửa camera trước":"Thêm mới camera trước",width:"900px","close-on-click-modal":!1,"destroy-on-close":!0},{default:l(()=>[e(I,{model:t,ref_key:"formRef",ref:P,rules:S,"label-width":"140px","label-position":"left",size:"medium",class:"camera-form"},{default:l(()=>[e(C,{gutter:20},{default:l(()=>[e(c,{span:12},{default:l(()=>[e(b,{label:"Loại camera",prop:"loaiCamera"},{default:l(()=>[e(u,{modelValue:t.loaiCamera,"onUpdate:modelValue":a[1]||(a[1]=n=>t.loaiCamera=n),placeholder:"Nhập loại camera...",autocomplete:"on"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:l(()=>[e(b,{label:"Độ phân giải",prop:"doPhanGiai"},{default:l(()=>[e(u,{modelValue:t.doPhanGiai,"onUpdate:modelValue":a[2]||(a[2]=n=>t.doPhanGiai=n),placeholder:"Ví dụ: 12MP"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,{gutter:20},{default:l(()=>[e(c,{span:12},{default:l(()=>[e(b,{label:"Khẩu độ",prop:"khauDo"},{default:l(()=>[e(u,{modelValue:t.khauDo,"onUpdate:modelValue":a[3]||(a[3]=n=>t.khauDo=n),placeholder:"Ví dụ: f/1.8"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:l(()=>[e(b,{label:"Loại zoom",prop:"loaiZoom"},{default:l(()=>[e(u,{modelValue:t.loaiZoom,"onUpdate:modelValue":a[4]||(a[4]=n=>t.loaiZoom=n),placeholder:"Ví dụ: Optical 2x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:l(()=>[e(c,{span:24},{default:l(()=>[e(b,{label:"Chế độ chụp",prop:"cheDoChup"},{default:l(()=>[e(u,{modelValue:t.cheDoChup,"onUpdate:modelValue":a[5]||(a[5]=n=>t.cheDoChup=n),placeholder:"Nhập chế độ chụp"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,{justify:"end",style:{"margin-top":"30px"}},{default:l(()=>[e(d,{onClick:q,style:{"margin-right":"10px"}},{default:l(()=>a[9]||(a[9]=[x("Hủy")])),_:1}),e(d,{type:"primary",onClick:N},{default:l(()=>[x(ne(f.value?"Cập nhật":"Lưu"),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ce=ae(ge,[["__scopeId","data-v-845ab2a1"]]);export{Ce as default};
