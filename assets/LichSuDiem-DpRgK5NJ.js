import{g as w}from"./TichDiemServices-Bu2dXRqM.js";import{_ as H,r as v,o as M,a as r,b as x,d as S,e as u,f as t,i as l,j as T,a8 as V,h as c,t as g,n as L}from"./index-I05jmhuU.js";const z={class:"container"},$={class:"header"},N={class:"filter-wrapper"},G={class:"table-wrapper"},B={class:"pagination-wrapper"},E={__name:"LichSuDiem",setup(F){const a=v({fromDate:null,toDate:null,page:0,size:10}),b=v([]),y=v(0),p=async()=>{try{const o=await w({...a.value});b.value=o.content,y.value=o.totalElements}catch(o){console.error("Lỗi khi lấy dữ liệu:",o)}},k=()=>{a.value.fromDate=null,a.value.toDate=null,a.value.page=0,p()},C=o=>{a.value.page=o-1,p()},Y=o=>{if(!o)return"";const e=new Date(o);e.setHours(e.getHours());const s=m=>m<10?"0"+m:m,f=s(e.getDate()),_=s(e.getMonth()+1),d=e.getFullYear(),h=s(e.getHours()),i=s(e.getMinutes()),D=s(e.getSeconds());return`${f}/${_}/${d} ${h}:${i}:${D}`};return M(p),(o,e)=>{const s=r("el-button"),f=r("router-link"),_=r("el-date-picker"),d=r("el-form-item"),h=r("el-form"),i=r("el-table-column"),D=r("el-table"),m=r("el-pagination");return S(),x("div",z,[u("div",$,[e[3]||(e[3]=u("div",{class:"title-section"},[u("h2",{class:"page-title"},"Lịch sử tích điểm")],-1)),t(f,{to:"/client/doiDiem"},{default:l(()=>[t(s,{type:"info",plain:"",icon:T(V),class:"back-btn"},{default:l(()=>e[2]||(e[2]=[c(" Quay lại ")])),_:1},8,["icon"])]),_:1})]),u("div",N,[t(h,{inline:!0,class:"filter-form"},{default:l(()=>[t(d,{label:"Từ ngày"},{default:l(()=>[t(_,{modelValue:a.value.fromDate,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.fromDate=n),type:"datetime",placeholder:"Chọn ngày bắt đầu",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DDTHH:mm:ssZ",class:"date-input"},null,8,["modelValue"])]),_:1}),t(d,{label:"Đến ngày"},{default:l(()=>[t(_,{modelValue:a.value.toDate,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.toDate=n),type:"datetime",placeholder:"Chọn ngày kết thúc",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DDTHH:mm:ssZ",class:"date-input"},null,8,["modelValue"])]),_:1}),t(d,null,{default:l(()=>[t(s,{type:"primary",onClick:p,class:"action-btn"},{default:l(()=>e[4]||(e[4]=[c(" Tìm kiếm ")])),_:1}),t(s,{onClick:k,class:"action-btn"},{default:l(()=>e[5]||(e[5]=[c(" Reset ")])),_:1})]),_:1})]),_:1})]),u("div",G,[t(D,{data:b.value,border:"",stripe:"",style:{width:"100%"},class:"data-table"},{default:l(()=>[t(i,{label:"STT",type:"index",width:"60",align:"center"},{default:l(({$index:n})=>[c(g(n+1+a.value.page*a.value.size),1)]),_:1}),t(i,{label:"Loại điểm",width:"100",align:"center"},{default:l(({row:n})=>[u("span",{class:L(n.loaiDiem==="CONG"?"green-text":"red-text")},g(n.loaiDiem==="CONG"?"+++":"---"),3)]),_:1}),t(i,{prop:"soDiem",label:"Số điểm",width:"100",align:"center"}),t(i,{prop:"ghiChu",label:"Ghi chú","min-width":"200"}),t(i,{label:"Thời gian",width:"160",align:"center"},{default:l(({row:n})=>[c(g(Y(n.thoiGian)),1)]),_:1}),t(i,{label:"Hạn sử dụng",width:"160",align:"center"},{default:l(({row:n})=>[c(g(Y(n.hanSuDung)||"Không giới hạn"),1)]),_:1})]),_:1},8,["data"])]),u("div",B,[t(m,{background:"",layout:"prev, pager, next",total:y.value,"page-size":a.value.size,"current-page":a.value.page+1,onCurrentChange:C},null,8,["total","page-size","current-page"])])])}}},Z=H(E,[["__scopeId","data-v-0403bc78"]]);export{Z as default};
