import{ak as G,al as $,am as J,an as Q}from"./ProductAdminService-BjtVeFMT.js";import{_ as W,u as Y,r as c,T as H,o as Z,w as ee,a as s,b as ne,d as te,f as e,e as v,i as a,h as b,j as N,a6 as ae,l as le,t as oe,E as re,R as P}from"./index-I05jmhuU.js";const ie={class:"container mt-4"},se={class:"table-responsive mb-4",style:{"margin-top":"20px"}},ue={class:"action-buttons-horizontal"},ce={class:"pagination-fixed"},he={class:"d-flex justify-content-center align-items-center gap-3"},D=5,de={__name:"HeDieuHanhAdmin",setup(pe){const l=Y(),T=c([]),d=c(1),j=c(1),V=c(0),f=c(""),p=c(!1),g=c(!1),B=c(null),x=c("");H({});const o=H({id:null,phienBan:"",nhaPhatTrien:"",giaoDienNguoiDung:""}),E={phienBan:[{required:!0,message:"Vui lòng nhập phiên bản",trigger:"blur"},{max:50,message:"Không được vượt quá 50 ký tự",trigger:"blur"}],nhaPhatTrien:[{required:!0,message:"Vui lòng nhập nhà phát triển",trigger:"blur"},{max:50,message:"Không được vượt quá 50 ký tự",trigger:"blur"}],giaoDienNguoiDung:[{required:!0,message:"Vui lòng nhập giao diện người dùng",trigger:"blur"},{max:50,message:"Không được vượt quá 50 ký tự",trigger:"blur"}]},m=async()=>{try{const t=await G(d.value-1,D,x.value.trim()||null);T.value=t.content,j.value=t.totalPages,V.value=t.totalElements}catch(t){console.error("Không thể load dữ liệu:",t),re.error("Không thể tải dữ liệu")}},w=()=>{f.value="",x.value="",d.value=1,m()},q=()=>{w()},K=()=>{try{C(),p.value=!0,g.value=!1}catch(t){console.error("Lỗi khi mở form tạo mới:",t),l.error("Không thể mở form tạo mới")}},S=async()=>{if(B.value)try{await P.confirm(g.value?"Bạn có chắc chắn muốn cập nhật loại này?":"Bạn có chắc chắn muốn thêm loại mới?","Xác nhận",{confirmButtonText:"Đồng ý",cancelButtonText:"Hủy",type:"warning"}),g.value?(await J(o.id,o),l.success("Cập nhật thành công!")):(await Q(o),l.success("Thêm mới thành công!")),C(),p.value=!1,m()}catch(t){if(t==="cancel"||t==="close"){l.info("Đã hủy thao tác");return}if(console.error("Lỗi khi lưu màu sắc:",t),t.response&&t.response.data){const{message:n,error:u,errors:h}=t.response.data;if(h){const i=Object.values(h).flat().join(`
`);l.error(i)}else if(n&&typeof n=="object"){const i=Object.values(n).join(`
`);l.error(i)}else n?l.error(n):u?l.error(typeof u=="string"?u:JSON.stringify(u)):l.error("Dữ liệu không hợp lệ, vui lòng kiểm tra lại!")}else if(t.response){const n=t.response.status;n===401?l.error("Bạn không có quyền thực hiện hành động này!"):n===403?l.error("Bạn không có quyền truy cập tài nguyên này!"):l.error("Đã xảy ra lỗi, vui lòng thử lại!")}else l.error("Không thể kết nối đến server!")}},U=()=>{p.value=!1},z=t=>{g.value=!0,Object.assign(o,t),p.value=!0},M=async t=>{try{await P.confirm("Bạn có chắc chắn muốn xóa không?","Xác nhận",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await $(t),l.success("Xóa thành công"),m()}catch(n){n!=="cancel"&&(console.error("Lỗi khi xóa:",n),l.error("Xóa thất bại"))}},I=t=>(d.value-1)*D+t+1,L=t=>{d.value=t,m()},C=()=>{o.id=null,o.phienBan="",o.nhaPhatTrien="",o.giaoDienNguoiDung=""};return Z(()=>{m()}),ee(f,()=>{x.value=f.value.trim(),d.value=1,m()}),(t,n)=>{const u=s("el-input"),h=s("el-col"),i=s("el-button"),y=s("el-row"),_=s("el-table-column"),O=s("el-table"),X=s("el-pagination"),k=s("el-form-item"),A=s("el-form"),R=s("el-dialog");return te(),ne("div",ie,[e(y,{gutter:20,class:"mb-4",align:"middle"},{default:a(()=>[e(h,{span:8},{default:a(()=>[e(u,{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=r=>f.value=r),placeholder:"Tìm kiếm theo phiên bản, nhà phát triển...",clearable:"","prefix-icon":"Search",onClear:w},null,8,["modelValue"])]),_:1}),e(h,{span:16,class:"text-right",align:"right"},{default:a(()=>[e(i,{type:"primary",onClick:K},{default:a(()=>n[5]||(n[5]=[b("Tạo mới")])),_:1}),e(i,{type:"primary",onClick:q},{default:a(()=>n[6]||(n[6]=[b("Làm mới")])),_:1})]),_:1})]),_:1}),n[8]||(n[8]=v("h2",null,"Danh sách hệ điều hành",-1)),v("div",se,[e(O,{data:T.value,border:"",style:{width:"100%"}},{default:a(()=>[e(_,{type:"index",index:I,label:"STT",width:"80"}),e(_,{prop:"phienBan",label:"Phiên bản"}),e(_,{prop:"nhaPhatTrien",label:"Nhà phát triển"}),e(_,{prop:"giaoDienNguoiDung",label:"Giao diện người dùng"}),e(_,{label:"Thao tác",width:"180"},{default:a(({row:r})=>[v("div",ue,[e(i,{size:"small",type:"primary",onClick:F=>z(r),icon:N(ae),circle:""},null,8,["onClick","icon"]),e(i,{size:"small",type:"danger",icon:N(le),circle:"",onClick:F=>M(r.id)},null,8,["icon","onClick"])])]),_:1})]),_:1},8,["data"])]),v("div",ce,[v("div",he,[e(X,{background:"",layout:"prev, pager, next","page-size":D,"current-page":d.value,total:V.value,"pager-count":7,"prev-text":"< Trước","next-text":"Sau >",onCurrentChange:L},null,8,["current-page","total"])])]),e(R,{modelValue:p.value,"onUpdate:modelValue":n[4]||(n[4]=r=>p.value=r),title:g.value?"Chỉnh sửa hệ điều hành":"Thêm mới hệ điều hành",width:"900px","close-on-click-modal":!1,"destroy-on-close":!0},{default:a(()=>[e(A,{model:o,ref_key:"formRef",ref:B,rules:E,"label-width":"140px","label-position":"left",size:"medium",class:"hdh-form"},{default:a(()=>[e(y,{gutter:20},{default:a(()=>[e(h,{span:12},{default:a(()=>[e(k,{label:"Phiên bản",prop:"phienBan"},{default:a(()=>[e(u,{modelValue:o.phienBan,"onUpdate:modelValue":n[1]||(n[1]=r=>o.phienBan=r),placeholder:"Nhập tên phiên bản hệ điều hành...",autocomplete:"on"},null,8,["modelValue"])]),_:1})]),_:1}),e(h,{span:12},{default:a(()=>[e(k,{label:"Nhà phát triển",prop:"nhaPhatTrien"},{default:a(()=>[e(u,{modelValue:o.nhaPhatTrien,"onUpdate:modelValue":n[2]||(n[2]=r=>o.nhaPhatTrien=r),placeholder:"Nhập tên nhà phát triển (ví dụ: Apple...)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,{gutter:20},{default:a(()=>[e(h,{span:12},{default:a(()=>[e(k,{label:"Giao diện người dùng",prop:"giaoDienNguoiDung"},{default:a(()=>[e(u,{modelValue:o.giaoDienNguoiDung,"onUpdate:modelValue":n[3]||(n[3]=r=>o.giaoDienNguoiDung=r),placeholder:"Nhập giao diện người dùng (ví dụ: One UI, MIUI...)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,{justify:"end",style:{"margin-top":"30px"}},{default:a(()=>[e(i,{onClick:U,style:{"margin-right":"10px"}},{default:a(()=>n[7]||(n[7]=[b("Hủy")])),_:1}),e(i,{type:"primary",onClick:S},{default:a(()=>[b(oe(g.value?"Cập nhật":"Lưu"),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},fe=W(de,[["__scopeId","data-v-5223948b"]]);export{fe as default};
