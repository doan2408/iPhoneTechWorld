import{_ as k,A as b,z as M,r as a,o as V,J as S,b as d,d as h,e as t,k as f,h as g,t as i,j as N,n as R,v as T,U as E,y as I,$,E as w}from"./index-I05jmhuU.js";const B={class:"verify-code-container"},U=["disabled"],q={key:0,class:"error"},z={key:1,class:"success"},C={__name:"VerifyRegister",setup(D){const y=b(),v=M().query.email||"",u=a(""),l=a(!1),n=a(""),p=a(!1),c=a(300),r=a(!1);let o=null;V(()=>{o=setInterval(()=>{c.value>0?c.value-=1:(r.value=!0,clearInterval(o))},1e3)});const _=s=>{const e=Math.floor(s/60),m=s%60;return`${e} phút ${m.toString().padStart(2,"0")}`},x=async()=>{if(r.value){n.value="Mã xác thực đã hết hạn. Vui lòng yêu cầu mã mới.";return}n.value="",l.value=!0;try{const s=await $.completeRegistration(v,u.value);p.value=!0,w.success("Đăng kí tài khoản thành công !"),setTimeout(()=>{y.push({path:"/login"})},1e3)}catch(s){n.value=s.message||"Mã không đúng hoặc đã hết hạn."}finally{l.value=!1}};return S(()=>{o&&clearInterval(o)}),(s,e)=>(h(),d("div",B,[e[3]||(e[3]=t("h2",null,"Xác minh mã xác thực",-1)),t("p",null,[e[2]||(e[2]=g(" Nhập mã gồm 8 chữ số đã gửi đến email: ")),t("b",null,[g(i(N(v))+" ",1),e[1]||(e[1]=t("i",{class:"bi bi-person-check-fill"},null,-1))])]),t("p",{class:R(["timer",{expired:r.value}])},i(r.value?"Mã đã hết hạn":`Thời gian còn lại: ${_(c.value)}`),3),t("form",{onSubmit:I(x,["prevent"])},[T(t("input",{"onUpdate:modelValue":e[0]||(e[0]=m=>u.value=m),type:"text",maxlength:"8",placeholder:"Nhập mã xác thực",required:""},null,512),[[E,u.value,void 0,{trim:!0}]]),t("button",{type:"submit",disabled:l.value},i(l.value?"Đang kiểm tra...":"Xác minh"),9,U)],32),n.value?(h(),d("p",q,i(n.value),1)):f("",!0),p.value?(h(),d("p",z,"✅ Mã hợp lệ! Đang chuyển hướng...")):f("",!0)]))}},j=k(C,[["__scopeId","data-v-06d47efe"]]);export{j as default};
