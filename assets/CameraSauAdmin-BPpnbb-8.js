import{aw as I,ax as $,ay as O,az as Q}from"./ProductAdminService-BjtVeFMT.js";import{_ as J,r as u,A as W,aj as x,c as z,o as Y,w as E,a as r,b as ee,d as ae,f as e,e as b,i as l,h as V,t as le,ao as oe,l as te,a6 as ne,R as ue,E as g}from"./index-I05jmhuU.js";const re={class:"container mt-4"},se={class:"table-responsive mb-4",style:{"margin-top":"20px"}},ie={class:"action-buttons-horizontal"},de={class:"pagination-fixed"},ce={class:"d-flex justify-content-center align-items-center gap-3"},me={__name:"CameraSauAdmin",setup(pe){const m=u(!1),f=u(!1),t=u({id:null,loaiCamera:"",doPhanGiai:"",khauDo:"",loaiZoom:"",cheDoChup:""}),D=u([]),i=u(1),B=u(1),y=u(0),v=u(5),k=u(""),w=u(!1),P=u(null);W();const S={Edit:x(ne),Delete:x(te),View:x(oe)},G={loaiCamera:[{required:!0,message:"Vui lòng nhập loại camera",trigger:"blur"}],doPhanGiai:[{required:!0,message:"Vui lòng nhập độ phân giải",trigger:"blur"}],khauDo:[{required:!0,message:"Vui lòng nhập khẩu độ",trigger:"blur"}],loaiZoom:[{required:!0,message:"Vui lòng nhập loại zoom",trigger:"blur"}],cheDoChup:[{required:!0,message:"Vui lòng nhập chế độ chụp",trigger:"blur"}]};z(()=>y.value===0?0:(i.value-1)*v.value+1),z(()=>Math.min(i.value*v.value,y.value));const p=async()=>{try{const o=await I(i.value-1,v.value,k.value.trim());D.value=o.content,B.value=o.totalPages,y.value=o.totalElements}catch(o){console.error("Không thể load dữ liệu:",o)}},T=()=>{t.value={id:null,loaiCamera:"",doPhanGiai:"",khauDo:"",loaiZoom:"",cheDoChup:""}},L=()=>{k.value="",i.value=1,p()},M=()=>{T(),f.value=!1,m.value=!0},U=()=>{m.value=!1},Z=async()=>{var o,a;w.value=!0;try{await P.value.validate(),f.value?(await O(t.value.id,t.value),g.success("Cập nhật camera sau thành công!")):(await Q(t.value),g.success("Thêm camera sau thành công!")),T(),m.value=!1,p()}catch(d){const s=((a=(o=d.response)==null?void 0:o.data)==null?void 0:a.message)||"Dữ liệu không hợp lệ, vui lòng kiểm tra lại!";g.error(s)}finally{w.value=!1}},R=(o,a=!1)=>{t.value={...o},f.value=a,m.value=!0},q=o=>(i.value-1)*v.value+o+1,K=o=>{i.value=o},N=async o=>{try{await ue.confirm("Bạn có chắc chắn muốn xoá mục này?","Xác nhận",{confirmButtonText:"Xoá",cancelButtonText:"Huỷ",type:"warning"}),await $(o),g.success("Xoá thành công"),p()}catch(a){a==="cancel"?g.info("Đã huỷ xoá"):g.error("Xoá thất bại")}};return Y(()=>{p()}),E(i,()=>{p()}),E(k,()=>{p()}),(o,a)=>{const d=r("el-input"),s=r("el-col"),h=r("el-button"),_=r("el-row"),c=r("el-table-column"),A=r("el-table"),X=r("el-pagination"),C=r("el-form-item"),j=r("el-form"),F=r("el-dialog");return ae(),ee("div",re,[e(_,{gutter:20,class:"mb-4",align:"middle"},{default:l(()=>[e(s,{span:8},{default:l(()=>[e(d,{modelValue:o.searchKeyword,"onUpdate:modelValue":a[0]||(a[0]=n=>o.searchKeyword=n),placeholder:"Tìm kiếm theo loại, ",clearable:"","prefix-icon":"Search",onClear:o.clearSearch},null,8,["modelValue","onClear"])]),_:1}),e(s,{span:16,class:"text-right",align:"right"},{default:l(()=>[e(h,{type:"primary",onClick:M},{default:l(()=>a[7]||(a[7]=[V("Tạo mới")])),_:1}),e(h,{type:"primary",onClick:L},{default:l(()=>a[8]||(a[8]=[V("Làm mới")])),_:1})]),_:1})]),_:1}),a[10]||(a[10]=b("h2",null,"Danh sách camera sau",-1)),b("div",se,[e(A,{data:D.value,border:"",style:{width:"100%"}},{default:l(()=>[e(c,{type:"index",index:q,label:"STT",width:"80"}),e(c,{prop:"loaiCamera",label:"Loại camera"}),e(c,{prop:"doPhanGiai",label:"Độ phân giải"}),e(c,{prop:"khauDo",label:"Khẩu độ"}),e(c,{prop:"loaiZoom",label:"Loại zoom"}),e(c,{prop:"cheDoChup",label:"Chế độ chụp"}),e(c,{label:"Thao tác",width:"180"},{default:l(({row:n})=>[b("div",ie,[e(h,{type:"primary",icon:S.Edit,circle:"",onClick:H=>R(n,!0)},null,8,["icon","onClick"]),e(h,{type:"danger",icon:S.Delete,circle:"",onClick:H=>N(n.id)},null,8,["icon","onClick"])])]),_:1})]),_:1},8,["data"])]),b("div",de,[b("div",ce,[e(X,{background:"",layout:"prev, pager, next","page-size":v.value,"current-page":i.value,total:y.value,"pager-count":7,"prev-text":"< Trước","next-text":"Sau >",onCurrentChange:K},null,8,["page-size","current-page","total"])])]),e(F,{modelValue:m.value,"onUpdate:modelValue":a[6]||(a[6]=n=>m.value=n),title:f.value?"Chỉnh sửa camera sau":"Thêm mới camera sau",width:"900px","close-on-click-modal":!1,"destroy-on-close":!0},{default:l(()=>[e(j,{model:t.value,ref_key:"formRef",ref:P,rules:G,"label-width":"140px","label-position":"left",size:"medium",class:"camera-form"},{default:l(()=>[e(_,{gutter:20},{default:l(()=>[e(s,{span:12},{default:l(()=>[e(C,{label:"Loại camera",prop:"loaiCamera"},{default:l(()=>[e(d,{modelValue:t.value.loaiCamera,"onUpdate:modelValue":a[1]||(a[1]=n=>t.value.loaiCamera=n),placeholder:"Nhập loại camera...",autocomplete:"on"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(C,{label:"Độ phân giải",prop:"doPhanGiai"},{default:l(()=>[e(d,{modelValue:t.value.doPhanGiai,"onUpdate:modelValue":a[2]||(a[2]=n=>t.value.doPhanGiai=n),placeholder:"Ví dụ: 12MP"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:20},{default:l(()=>[e(s,{span:12},{default:l(()=>[e(C,{label:"Khẩu độ",prop:"khauDo"},{default:l(()=>[e(d,{modelValue:t.value.khauDo,"onUpdate:modelValue":a[3]||(a[3]=n=>t.value.khauDo=n),placeholder:"Ví dụ: f/1.8"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:l(()=>[e(C,{label:"Loại zoom",prop:"loaiZoom"},{default:l(()=>[e(d,{modelValue:t.value.loaiZoom,"onUpdate:modelValue":a[4]||(a[4]=n=>t.value.loaiZoom=n),placeholder:"Ví dụ: Optical 2x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(s,{span:24},{default:l(()=>[e(C,{label:"Chế độ chụp",prop:"cheDoChup"},{default:l(()=>[e(d,{modelValue:t.value.cheDoChup,"onUpdate:modelValue":a[5]||(a[5]=n=>t.value.cheDoChup=n),placeholder:"Nhập chế độ chụp"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{justify:"end",style:{"margin-top":"30px"}},{default:l(()=>[e(h,{onClick:U,style:{"margin-right":"10px"}},{default:l(()=>a[9]||(a[9]=[V("Hủy")])),_:1}),e(h,{type:"primary",onClick:Z},{default:l(()=>[V(le(f.value?"Cập nhật":"Lưu"),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},fe=J(me,[["__scopeId","data-v-493ce6db"]]);export{fe as default};
