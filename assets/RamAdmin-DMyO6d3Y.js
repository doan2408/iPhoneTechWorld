import{_ as Q,$ as J,a0 as W,a1 as Z}from"./ProductAdminService-Cqy2_DSd.js";import{_ as ee,u as ae,r as g,T as C,c as T,o as te,w as le,a as d,b as ne,d as oe,f as e,e as b,i as t,h as D,j as L,a6 as se,l as ue,t as re,R as S,E as X}from"./index-BFtI-PwE.js";const ie={class:"container mt-4"},ce={class:"table-responsive mb-4",style:{"margin-top":"20px"}},de={class:"action-buttons-horizontal"},me={class:"pagination-fixed"},pe={class:"d-flex justify-content-center align-items-center gap-3"},x=5,he={__name:"RamAdmin",setup(ge){const c=ae(),k=g([]),B=g(1),V=g(0),m=g(1),v=g(""),f=g(!1),_=g(!1),R=g(null),l=C({id:null,dungLuong:"",loai:"",tocDoDocGhi:"",nhaSanXuat:"",namRaMat:null}),n=C({dungLuong:"",loai:"",tocDoDocGhi:"",nhaSanXuat:"",namRaMat:null}),M=async()=>{try{const o=await Q(m.value-1,x,v.value.trim());k.value=o.content,B.value=o.totalPages,V.value=o.totalElements}catch(o){console.error("Không thể load dữ liệu:",o)}};T(()=>V.value===0?0:(m.value-1)*x+1),T(()=>Math.min(m.value*x,V.value));const w=()=>{l.id=null,l.dungLuong="",l.loai="",l.tocDoDocGhi="",l.nhaSanXuat="",l.namRaMat="",n.dungLuong="",n.loai="",n.tocDoDocGhi="",n.nhaSanXuat="",n.namRaMat=""},G=()=>{n.dungLuong="",n.loai="",n.tocDoDocGhi="",n.nhaSanXuat="",n.namRaMat=""},N=async()=>{if(!R.value)return;const o=_.value?"Bạn có chắc chắn muốn cập nhật RAM này?":"Bạn có chắc chắn muốn thêm mới RAM này?";try{await S.confirm(o,"Xác nhận",{confirmButtonText:"Đồng ý",cancelButtonText:"Hủy",type:"warning"}),await R.value.validate(),_.value?(await W(l.id,l),c.success("Cập nhật RAM thành công!")):(await Z(l),c.success("Thêm mới RAM thành công!")),w(),f.value=!1,M()}catch(a){if(!a.response&&!a.request){c.info("Đã hủy thao tác");return}if(n.dungLuong="",n.loai="",n.tocDoDocGhi="",n.nhaSanXuat="",n.namRaMat="",a.response){const p=a.response.status,u=a.response.data;if(p===400){const r=u.message;if(typeof r=="string")c.error(r);else if(typeof r=="object"){Object.keys(n).forEach(i=>{n[i]=r[i]||""});const h=Object.values(n).filter(i=>i);c.error(h.length?h.join(`
`):"Dữ liệu không hợp lệ!")}else c.error("Dữ liệu không hợp lệ!")}else p===409?c.error(u.message||"Dữ liệu đã tồn tại"):p>=500?c.error("Server lỗi, vui lòng thử lại sau"):c.error(u.message||"Đã xảy ra lỗi không xác định")}else a.request?c.error("Không nhận được phản hồi từ server"):c.error("Lỗi gửi request: "+a.message);console.error("Lỗi submitForm:",a)}},j=async o=>{try{await S.confirm("Bạn có chắc chắn muốn xoá ram này không?","Xác nhận xoá",{confirmButtonText:"Xoá",cancelButtonText:"Huỷ",type:"warning"}),await J(o),X.success("Xoá thành công!"),M()}catch(a){a!=="cancel"&&X.error("Xoá thất bại! Vui lòng thử lại.")}},E=()=>{m.value=1},A=()=>{v.value="",m.value=1},U=()=>{w(),f.value=!0,_.value=!1},P=()=>{f.value=!1},z=o=>{_.value=!0,Object.assign(l,o),f.value=!0,G()},Y=o=>(m.value-1)*x+o+1,q=o=>{m.value=o};return te(()=>{M()}),le([m,v],()=>{M()}),(o,a)=>{const p=d("el-input"),u=d("el-col"),r=d("el-button"),h=d("el-row"),i=d("el-table-column"),F=d("el-table"),H=d("el-pagination"),y=d("el-form-item"),O=d("el-date-picker"),$=d("el-form"),I=d("el-dialog");return oe(),ne("div",ie,[e(h,{gutter:20,class:"mb-4 justify-content-center"},{default:t(()=>[e(u,{span:6},{default:t(()=>[e(p,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=s=>v.value=s),placeholder:"Tìm kiếm",clearable:""},null,8,["modelValue"])]),_:1}),e(u,{span:3},{default:t(()=>[e(r,{type:"primary",onClick:E,class:"w-100"},{default:t(()=>a[7]||(a[7]=[D("Tìm kiếm")])),_:1})]),_:1})]),_:1}),e(h,{gutter:20,class:"mb-2",justify:"end"},{default:t(()=>[e(u,{span:3},{default:t(()=>[e(r,{type:"primary",onClick:U,class:"w-100"},{default:t(()=>a[8]||(a[8]=[D("Tạo mới")])),_:1})]),_:1}),e(u,{span:3},{default:t(()=>[e(r,{type:"primary",onClick:A,class:"w-100"},{default:t(()=>a[9]||(a[9]=[D("Làm mới")])),_:1})]),_:1})]),_:1}),a[11]||(a[11]=b("h2",null,"Danh sách ram",-1)),b("div",ce,[e(F,{data:k.value,border:"",style:{width:"100%"}},{default:t(()=>[e(i,{type:"index",index:Y,label:"STT",width:"80"}),e(i,{prop:"dungLuong",label:"Dung lượng"}),e(i,{prop:"loai",label:"Loại"}),e(i,{prop:"tocDoDocGhi",label:"Tốc độ đọc ghi"}),e(i,{prop:"nhaSanXuat",label:"Nhà sản xuất"}),e(i,{prop:"namRaMat",label:"Năm ra mắt"}),e(i,{label:"Thao tác",width:"180"},{default:t(({row:s})=>[b("div",de,[e(r,{size:"small",type:"primary",icon:L(se),circle:"",onClick:K=>z(s)},null,8,["icon","onClick"]),e(r,{size:"small",type:"danger",icon:L(ue),circle:"",onClick:K=>j(s.id)},null,8,["icon","onClick"])])]),_:1})]),_:1},8,["data"])]),b("div",me,[b("div",pe,[e(H,{background:"",layout:"prev, pager, next","page-size":x,"current-page":m.value,total:V.value,"pager-count":7,"prev-text":"< Trước","next-text":"Sau >",onCurrentChange:q},null,8,["current-page","total"])])]),e(I,{modelValue:f.value,"onUpdate:modelValue":a[6]||(a[6]=s=>f.value=s),title:_.value?"Chỉnh sửa ram":"Thêm mới ram",width:"900px","close-on-click-modal":!1,"destroy-on-close":!0},{default:t(()=>[e($,{model:l,ref_key:"formRef",ref:R,"label-width":"140px","label-position":"left",class:"hdh-form"},{default:t(()=>[e(h,{gutter:20},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(y,{label:"Dung lượng",prop:"dungLuong"},{default:t(()=>[e(p,{modelValue:l.dungLuong,"onUpdate:modelValue":a[1]||(a[1]=s=>l.dungLuong=s),placeholder:"Nhập dung lượng (ví dụ: 128GB)",autocomplete:"on"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(y,{label:"Loại",prop:"loai"},{default:t(()=>[e(p,{modelValue:l.loai,"onUpdate:modelValue":a[2]||(a[2]=s=>l.loai=s),placeholder:"Nhập loại bộ nhớ (ví dụ: NVMe)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{gutter:20},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(y,{label:"Nhà sản xuất",prop:"nhaSanXuat"},{default:t(()=>[e(p,{modelValue:l.nhaSanXuat,"onUpdate:modelValue":a[3]||(a[3]=s=>l.nhaSanXuat=s),placeholder:"Nhập tên nhà sản xuất (ví dụ: Apple)"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(y,{label:"Năm ra mắt",prop:"namRaMat"},{default:t(()=>[e(O,{modelValue:l.namRaMat,"onUpdate:modelValue":a[4]||(a[4]=s=>l.namRaMat=s),type:"date","value-format":"YYYY-MM-DD",placeholder:"Chọn ngày ra mắt",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{gutter:20},{default:t(()=>[e(u,null,{default:t(()=>[e(y,{label:"Tốc độ đọc ghi",prop:"tocDoDocGhi"},{default:t(()=>[e(p,{modelValue:l.tocDoDocGhi,"onUpdate:modelValue":a[5]||(a[5]=s=>l.tocDoDocGhi=s),placeholder:"Ví dụ: 12MP"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{justify:"end",style:{"margin-top":"30px"}},{default:t(()=>[e(r,{onClick:P,style:{"margin-right":"10px"}},{default:t(()=>a[10]||(a[10]=[D("Hủy")])),_:1}),e(r,{type:"primary",onClick:N},{default:t(()=>[D(re(_.value?"Cập nhật":"Lưu"),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ve=ee(he,[["__scopeId","data-v-a2369581"]]);export{ve as default};
