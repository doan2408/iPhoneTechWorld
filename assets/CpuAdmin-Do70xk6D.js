import{ao as J,ap as Q,aq as Z,ar as ee}from"./ProductAdminService-BjtVeFMT.js";import{_ as ae,u as ne,A as le,r as d,T as q,aj as C,c as M,o as te,w as L,a as i,b as oe,d as ue,f as a,e as b,i as n,h as y,t as se,ao as re,l as ie,a6 as pe,R as de,E as X}from"./index-I05jmhuU.js";const ce={class:"container mt-4"},he={class:"table-responsive mb-4",style:{"margin-top":"20px"}},ge={class:"action-buttons-horizontal"},me={class:"pagination-fixed"},fe={class:"d-flex justify-content-center align-items-center gap-3"},ve={style:{"text-align":"right","margin-top":"20px"}},_e={__name:"CpuAdmin",setup(be){const c=ne();le();const f=d(!1),v=d(!1),E=d(null),t=q({id:null,hangSanXuat:"Apple",soNhan:"",chipXuLy:"",xungNhip:"",congNgheSanXuat:"",boNhoDem:"",tieuThuDienNang:"",namRaMat:null}),D=d([]),h=d(1),R=d(1),V=d(0),x=d(5),N=d(""),k=d("");q({});const S={Edit:C(pe),Delete:C(ie),View:C(re)},U={hangSanXuat:[{required:!0,message:"Vui lòng nhập hãng sản xuất",trigger:"blur"},{max:50,message:"không được phép quá 50 kí tự"}],soNhan:[{required:!0,message:"Vui lòng nhập số nhân",trigger:"blur"},{max:50,message:"không được phép quá 50 kí tự"}],chipXuLy:[{required:!0,message:"Vui lòng nhập tên chip xử lý",trigger:"blur"},{max:50,message:"không được phép quá 50 kí tự"}],xungNhip:[{required:!0,message:"Vui lòng nhập xung nhịp",trigger:"blur"},{max:50,message:"không được phép quá 50 kí tự"}],congNgheSanXuat:[{required:!0,message:"Vui lòng nhập công nghệ sản xuất",trigger:"blur"},{max:50,message:"không được phép quá 50 kí tự"}],boNhoDem:[{required:!0,message:"Vui lòng nhập bộ nhớ đệm",trigger:"blur"},{max:50,message:"không được phép quá 50 kí tự"}],tieuThuDienNang:[{required:!0,message:"Vui lòng nhập tiêu thụ điện năng",trigger:"blur"},{max:50,message:"không được phép quá 50 kí tự"}],namRaMat:[{required:!0,message:"Vui lòng chọn năng ra mắt",trigger:"blur"},{max:50,message:"không được phép quá 50 kí tự"}]};M(()=>V.value===0?0:(h.value-1)*x.value+1),M(()=>Math.min(h.value*x.value,V.value));const _=async()=>{try{const o=await J(h.value-1,x.value,k.value.trim()||null);D.value=o.content,R.value=o.totalPages,V.value=o.totalElements}catch(o){console.error("Không thể load dữ liệu:",o)}},T=()=>{Object.assign(t,{id:null,hangSanXuat:"Apple",soNhan:"",chipXuLy:"",xungNhip:"",congNgheSanXuat:"",boNhoDem:"",tieuThuDienNang:"",namRaMat:null})},A=()=>{w()},w=()=>{N.value="",k.value="",h.value=1,_()},B=()=>{T(),v.value=!1,f.value=!0},j=()=>{f.value=!1},P=async()=>{var o;try{const e={...t};console.log("Submitting data:",e),v.value?(await Z(t.id,e),c.success("Cập nhật thành công!")):(await ee(e),c.success("Thêm CPU thành công!")),T(),f.value=!1,_()}catch(e){if(console.error("❌ Lỗi xử lý form:",e),console.log("err.response:",e.response),console.log("err.response.data:",(o=e.response)==null?void 0:o.data),e&&e.fields){Object.values(e.fields).forEach(s=>{s.forEach(g=>c.error(g.message))});return}if(e.response&&e.response.data){const{message:s,errors:g}=e.response.data;Array.isArray(s)?s.forEach(u=>c.error(u.message)):typeof s=="object"&&s!==null?Object.values(s).forEach(u=>c.error(u)):typeof g=="object"&&g!==null?Object.values(g).forEach(u=>c.error(u)):c.error(s||g||"Lỗi không xác định!");return}if(!e.response){c.error("Lỗi kết nối server. Vui lòng thử lại sau!");return}const p=v.value?"cập nhật":"thêm",r=(e==null?void 0:e.message)||String(e)||"Lỗi không xác định!";c.error(`Lỗi khi ${p} CPU: ${r}`)}},z=o=>{v.value=!0,Object.assign(t,o),f.value=!0},H=o=>(h.value-1)*x.value+o+1,O=o=>{h.value=o},Y=async o=>{try{await de.confirm("Bạn có chắc chắn muốn xoá mục này?","Xác nhận",{confirmButtonText:"Xoá",cancelButtonText:"Huỷ",type:"warning"}),await Q(o),X.success("Xoá thành công"),_()}catch(e){e==="cancel"?X.info("Đã huỷ xoá"):X.error("Xoá thất bại")}};return te(()=>{_()}),L(h,()=>{_()}),L(N,()=>{k.value=N.value.trim(),h.value=1,_()}),(o,e)=>{const p=i("el-input"),r=i("el-col"),s=i("el-button"),g=i("el-row"),u=i("el-table-column"),$=i("el-table"),I=i("el-pagination"),m=i("el-form-item"),F=i("el-date-picker"),K=i("el-form"),G=i("el-dialog");return ue(),oe("div",ce,[a(g,{gutter:20,class:"mb-4",align:"middle"},{default:n(()=>[a(r,{span:8},{default:n(()=>[a(p,{modelValue:N.value,"onUpdate:modelValue":e[0]||(e[0]=l=>N.value=l),placeholder:"Tìm kiếm theo tên, loại màn hình, tần số quét...",clearable:"","prefix-icon":"Search",onClear:w},null,8,["modelValue"])]),_:1}),a(r,{span:16,class:"text-right",align:"right"},{default:n(()=>[a(s,{type:"primary",onClick:B},{default:n(()=>e[10]||(e[10]=[y("Tạo mới")])),_:1}),a(s,{type:"primary",onClick:A},{default:n(()=>e[11]||(e[11]=[y("Làm mới")])),_:1})]),_:1})]),_:1}),e[13]||(e[13]=b("h2",null,"Danh sách cpu",-1)),b("div",he,[a($,{data:D.value,border:"",style:{width:"100%"}},{default:n(()=>[a(u,{type:"index",index:H,label:"STT",width:"80"}),a(u,{prop:"chipXuLy",label:"Chip xử lý"}),a(u,{prop:"hangSanXuat",label:"Hãng sản xuất"}),a(u,{prop:"soNhan",label:"Số nhân"}),a(u,{prop:"xungNhip",label:"Xung nhịp"}),a(u,{prop:"congNgheSanXuat",label:"Công nghệ sản xuất"}),a(u,{prop:"boNhoDem",label:"Bộ nhớ đệm"}),a(u,{prop:"tieuThuDienNang",label:"Tiêu thụ điện năng"}),a(u,{prop:"namRaMat",label:"Năm ra mắt"}),a(u,{label:"Thao tác",width:"180"},{default:n(({row:l})=>[b("div",ge,[a(s,{size:"small",type:"primary",icon:S.Edit,circle:"",onClick:W=>z(l)},null,8,["icon","onClick"]),a(s,{size:"small",type:"danger",icon:S.Delete,circle:"",onClick:W=>Y(l.id)},null,8,["icon","onClick"])])]),_:1})]),_:1},8,["data"])]),b("div",me,[b("div",fe,[a(I,{background:"",layout:"prev, pager, next","page-size":x.value,"current-page":h.value,total:V.value,"pager-count":7,"prev-text":"< Trước","next-text":"Sau >",onCurrentChange:O},null,8,["page-size","current-page","total"])])]),a(G,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=l=>f.value=l),title:v.value?"Chỉnh sửa cpu":"Thêm mới cpu","close-on-click-modal":!1,"destroy-on-close":!0,width:"1200px"},{default:n(()=>[a(K,{model:t,ref_key:"formRef",ref:E,rules:U,"label-width":"150px"},{default:n(()=>[a(g,{gutter:20},{default:n(()=>[a(r,{span:12},{default:n(()=>[a(m,{label:"Chip xử lý",prop:"chipXuLy"},{default:n(()=>[a(p,{modelValue:t.chipXuLy,"onUpdate:modelValue":e[1]||(e[1]=l=>t.chipXuLy=l),placeholder:"Nhập tên chip xử lý (ví dụ: Apple A17 Pro)"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:n(()=>[a(m,{label:"Hãng sản xuất",prop:"hangSanXuat"},{default:n(()=>[a(p,{modelValue:t.hangSanXuat,"onUpdate:modelValue":e[2]||(e[2]=l=>t.hangSanXuat=l),placeholder:"Nhập tên hãng sản xuất (ví dụ: Intel, AMD...)"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:n(()=>[a(m,{label:"Số nhân",prop:"soNhan"},{default:n(()=>[a(p,{modelValue:t.soNhan,"onUpdate:modelValue":e[3]||(e[3]=l=>t.soNhan=l),placeholder:"Nhập số lượng nhân (ví dụ: 8)"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:n(()=>[a(m,{label:"Xung nhịp",prop:"xungNhip"},{default:n(()=>[a(p,{modelValue:t.xungNhip,"onUpdate:modelValue":e[4]||(e[4]=l=>t.xungNhip=l),placeholder:"Nhập xung nhịp (ví dụ: 3.2GHz)"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:n(()=>[a(m,{label:"Công nghệ sản xuất",prop:"congNgheSanXuat"},{default:n(()=>[a(p,{modelValue:t.congNgheSanXuat,"onUpdate:modelValue":e[5]||(e[5]=l=>t.congNgheSanXuat=l),placeholder:"Nhập công nghệ sản xuất (ví dụ: 7nm, 5nm...)"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:n(()=>[a(m,{label:"Bộ nhớ đệm",prop:"boNhoDem"},{default:n(()=>[a(p,{modelValue:t.boNhoDem,"onUpdate:modelValue":e[6]||(e[6]=l=>t.boNhoDem=l),placeholder:"Nhập bộ nhớ đệm (ví dụ: 16MB)"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:n(()=>[a(m,{label:"Tiêu thụ điện năng",prop:"tieuThuDienNang"},{default:n(()=>[a(p,{modelValue:t.tieuThuDienNang,"onUpdate:modelValue":e[7]||(e[7]=l=>t.tieuThuDienNang=l),placeholder:"Nhập mức tiêu thụ điện (ví dụ: 65W)"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:n(()=>[a(m,{label:"Năm ra mắt",prop:"namRaMat"},{default:n(()=>[a(F,{modelValue:t.namRaMat,"onUpdate:modelValue":e[8]||(e[8]=l=>t.namRaMat=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"Chọn ngày ra mắt sản phẩm",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),b("div",ve,[a(s,{onClick:j},{default:n(()=>e[12]||(e[12]=[y("Hủy")])),_:1}),a(s,{type:"primary",onClick:P},{default:n(()=>[y(se(v.value?"Cập nhật":"Lưu"),1)]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ve=ae(_e,[["__scopeId","data-v-9d7aa2da"]]);export{Ve as default};
