import{_ as kn,T as Hn,z as Nn,u as In,c as T,r as h,o as Gn,b as o,d as e,e as n,B as w,k as c,t as l,f as u,h as p,j as g,n as H,F as v,m as y,a0 as $,v as O,X as j,Z as Sn,y as Z}from"./index-BFtI-PwE.js";import{b as wn,B as Mn,C as En,D as Ln}from"./HoaDonAdminServices-DGan0CW1.js";import{S as xn,P as J,T as An,R as Pn,C as Rn,U,a as Vn,M as Fn,b as $n,d as On}from"./GiaoHangServices-TAa_Jpko.js";import{g as Un}from"./FalseReasonServices-DQjZfLPp.js";import{a as Xn,c as Bn}from"./ActionAfterCaseServices-ZTgTmkBw.js";import{C as Kn}from"./ConfirmModal-CTKRHOBX.js";import{F as Yn,C as zn,a as jn}from"./file-text-BW0xByEq.js";import{T as M}from"./truck-7RCsuvKx.js";import{C as D}from"./circle-check-big-BGmdFvbD.js";import{X as Q}from"./x-CqAEaBnF.js";import{c as Zn}from"./createLucideIcon-Bz9RgSCD.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Zn("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Qn={class:"delivery-tracking-container"},Wn={class:"order-header"},qn={class:"order-info"},nt={key:0},tt={key:1},st={class:"order-date"},at={class:"info-item"},it={class:"order-summary"},et={class:"total-info"},ot={class:"total-amount"},lt={class:"timeline-section"},rt={class:"timeline-wrapper"},ct={class:"step-icon"},dt={class:"step-content"},ut={class:"step-title"},gt={key:0,class:"step-time"},ht={key:1,class:"step-description"},pt={key:0,class:"step-arrow"},mt={class:"timeline-section-row"},vt={class:"timeline-section timeline-shipping"},yt={class:"timeline-wrapper"},Tt={class:"step-icon"},ft={class:"step-content"},bt={class:"step-title"},_t={key:0,class:"step-time"},Dt={key:1,class:"step-description"},Ct={key:0,class:"step-arrow-shipping"},kt={class:"timeline-section timeline-false"},Ht={class:"timeline-wrapper"},Nt={class:"step-icon"},It={class:"step-content"},Gt={class:"step-title"},St={key:0,class:"step-time"},wt={key:1,class:"step-description"},Mt={class:"actions-section"},Et={class:"left-actions"},Lt=["disabled"],xt={key:10,class:"fail-overlay"},At={class:"fail-modal"},Pt=["value"],Rt={class:"fail-actions"},Vt=["disabled"],Ft={key:11,class:"return-overlay"},$t={class:"return-modal"},Ot={class:"return-imei-list"},Ut=["onUpdate:modelValue"],Xt={class:"return-imei-info"},Bt={class:"imei-main"},Kt={class:"imei-sub"},Yt={key:0,class:"return-selected"},zt={class:"return-table"},jt=["onUpdate:modelValue"],Zt=["value"],Jt={class:"return-actions"},Qt=["disabled"],Wt={class:"right-actions"},qt={class:"delivery-details"},ns={class:"details-grid"},ts={class:"detail-card customer-card"},ss={class:"card-header"},as={class:"card-content"},is={class:"customer-info"},es={class:"customer-avatar"},os={class:"customer-details"},ls={class:"contact-info"},rs={class:"contact-item"},cs={class:"contact-item"},ds={class:"contact-item"},us={class:"detail-card delivery-card"},gs={class:"card-header"},hs={class:"card-content"},ps={class:"delivery-info"},ms={class:"info-item"},vs={class:"info-item"},ys={key:0,class:"driver-info"},Ts={class:"driver-avatar"},fs={class:"driver-name"},bs={class:"driver-phone"},_s={key:1,class:"no-driver"},Ds={class:"info-item"},Cs={class:"detail-card items-card"},ks={class:"card-header"},Hs={class:"card-content"},Ns={class:"items-summary"},Is=["src","alt"],Gs={class:"item-info"},Ss={class:"item-name"},ws={class:"item-spec"},Ms={class:"imei-list"},Es={class:"item-price"},Ls={class:"total-summary"},xs={class:"total-row"},As={class:"total-price"},Ps={key:1,class:"request-overlay"},Rs={class:"request-modal"},Vs={class:"request-table"},Fs=["onClick"],$s={key:1,style:{color:"gray","font-size":"14px"}},Os=["onClick"],Us={key:1,style:{color:"gray","font-size":"14px"}},Xs={class:"request-actions"},Bs=["src"],Ks={controls:"",autoplay:"",class:"preview-video"},Ys=["src"],zs={__name:"GiaoHangAdminProcessing",setup(js){const a=Hn({}),I=Nn(),m=In(),E=async()=>{const i=I.params.id;if(i)try{const t=await wn(i);console.log("rs",t.data),Object.assign(a,t.data)}catch(t){console.error("Lỗi khi tải chi tiết đơn hàng:",t)}},W=i=>{switch(i){case"SILVER":return"silver";case"GOLD":return"gold";case"DIAMOND":return"diamond";default:return"member"}},q=i=>{switch(i){case"SILVER":return"Bạc";case"GOLD":return"Vàng";case"DIAMOND":return"Kim cương";case"MEMBER":return"Thành viên";default:return"Không có hạng"}},nn=T(()=>[{id:1,title:"Đặt Hàng Thành Công",icon:Yn,status:a.trangThaiDonHang==="Chờ xử lý"?"current":["Đã đóng gói","Đang giao","Đã giao","Giao thất bại","Trả hàng","Đã xác nhận","Sẵn sàng giao","Đã hủy"].includes(a.trangThaiDonHang)?"completed":"pending",timestamp:a.ngayDatHang,description:"Đơn hàng đang chờ được xác nhận"},{id:2,title:"Đơn hàng đã được xác nhận",icon:xn,status:a.trangThaiDonHang==="Đã xác nhận"?"current":["Đã đóng gói","Đang giao","Đã giao","Giao thất bại","Trả hàng","Sẵn sàng giao"].includes(a.trangThaiDonHang)?"completed":"pending",timestamp:null,description:"Đơn hàng đang chờ được đóng gói"},{id:3,title:"Đã Đóng Gói",icon:J,status:a.trangThaiDonHang==="Đã đóng gói"?"current":["Đang giao","Đã giao","Giao thất bại","Trả hàng","Sẵn sàng giao"].includes(a.trangThaiDonHang)?"completed":"pending",timestamp:["Đã đóng gói","Đang giao","Đã giao","Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?a.packedAt:null,description:["Đã đóng gói","Đang giao","Đã giao","Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?"Đơn hàng đã được đóng gói":null},{id:4,title:"Sẵn sàng giao",icon:zn,status:a.trangThaiDonHang==="Sẵn sàng giao"?"current":["Đang giao","Đã giao","Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?"completed":"pending",timestamp:["Đã đóng gói","Đang giao","Đã giao","Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?a.packedAt:null,description:["Đã đóng gói","Đang giao","Đã giao","Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?"Đơn hàng sắp dược giao":null}]),tn=T(()=>[{id:1,title:"Đang Giao",icon:M,status:a.trangThaiDonHang==="Đang giao"?"current":["Đã giao","Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?"completed":"pending",timestamp:["Đang giao","Đã giao","Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?a.shippingAt:null,description:["Đang giao","Đã giao","Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?"Đơn hàng đang được giao":null},{id:2,title:"Giao Hàng Thành Công",icon:D,status:a.trangThaiDonHang==="Đã giao"?"current":["Trả hàng"].includes(a.trangThaiDonHang)?"completed":"pending",timestamp:a.trangThaiDonHang==="Đã giao"?a.deliveredAt:null,description:a.trangThaiDonHang==="Đã giao"?"Khách hàng đã nhận hàng":null}]),sn=T(()=>[{id:1,title:"Giao Thất Bại",icon:jn,status:["Giao thất bại"].includes(a.trangThaiDonHang)?"current":"pending",timestamp:["Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?a.failedAt:null,description:["Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?"Đơn hàng giao thất bại":null},{id:2,title:"Trả hàng",icon:An,status:["Trả hàng"].includes(a.trangThaiDonHang)?"current":"pending",timestamp:["Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?a.failedAt:null,description:["Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?"Đơn hàng Trả hàng":null},{id:3,title:"Đã hủy",icon:Pn,status:["Đã hủy"].includes(a.trangThaiDonHang)?"current":"pending",timestamp:["Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?a.failedAt:null,description:["Giao thất bại","Trả hàng"].includes(a.trangThaiDonHang)?"Đơn hàng đã bị hủy":null}]),an=T(()=>a.trangThaiDonHang==="Chờ xử lý"),en=T(()=>a.trangThaiDonHang==="Đã xác nhận"),X=T(()=>a.trangThaiDonHang==="Đã đóng gói"),on=T(()=>["Chờ xử lý"].includes(a.trangThaiDonHang)),ln=T(()=>a.trangThaiDonHang==="Đang giao");T(()=>a.trangThaiDonHang==="Đã giao");const C=i=>{if(!i)return"N/A";const t=new Date(i);if(isNaN(t.getTime()))return"Invalid Date";const s=t.getDate().toString().padStart(2,"0"),r=(t.getMonth()+1).toString().padStart(2,"0"),d=t.getFullYear();return`${s}/${r}/${d}`},L=i=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(i),rn=i=>({pending:"Chờ xác nhận",confirmed:"Đã xác nhận",preparing:"Đang chuẩn bị",shipping:"Đang giao hàng",delivered:"Đã giao hàng",cancelled:"Đã hủy"})[i]||i;function cn(i){const t={pending:["Chờ xử lý","Đã xác nhận"],packed:["Đã đóng gói","Sẵn sàng giao"],shipping:["Đang giao"],delivered:["Đã giao"],failed:["Giao thất bại"],returned:["Trả hàng","Đã hủy"]};if(typeof i!="string")return i;const s=i.trim().toLowerCase();for(const[r,d]of Object.entries(t))if(d.some(Cn=>Cn.toLowerCase()===s))return r;return i}const dn=i=>!i||typeof i!="string"?"Chưa thanh toán":{PENDING:"Chưa thanh toán",CONFIRMED:"Chưa thanh toán",PAID:"Đã thanh toán",COMPLETED:"Hoàn tất",CANCELLED:"Hủy",REFUNDED:"Hoàn tiền"}[i.toUpperCase()]||"Chưa thanh toán",un=i=>!i||typeof i!="string"?"pending":{PENDING:"pending",CONFIRMED:"pending",PAID:"paid",COMPLETED:"completed",CANCELLED:"cancelled",REFUNDED:"refunded"}[i.toUpperCase()]||"pending",N=h(!1),k=h(""),B=h([]),gn=async()=>{try{const i=await Un("FAILED_DELIVERY");B.value=i.data}catch(i){console.error("Lỗi load lý do:",i)}},hn=()=>{N.value=!0,k.value="",gn(),console.log(N.value)},pn=async()=>{f("Giao thất bại"),await Xn(a.idHoaDon,k.value),N.value=!1,k.value=""},x=h(!1),_=h([]);h("");const mn=h([]),vn=async()=>{try{const i={idHoaDon:a.idHoaDon,imeis:_.value.filter(t=>t.selected).map(t=>({idHoaDonChiTiet:t.idHoaDonChiTiet,soImei:t.soImei,idFailReason:t.reasonId}))};await Bn(i),f("Trả hàng"),x.value=!1,_.value.forEach(t=>{t.selected=!1,t.reasonId=""})}catch(i){console.error("Lỗi khi trả hàng:",i)}},A=h(!1),f=async i=>{var s,r;const t=I.params.id;try{i==="Sẵn sàng giao"&&(A.value=!0,m.info("Đang tạo mã vận đơn...",{autoClose:2e3}));const d=await On(t,i);a.trangThaiDonHang=i,console.log(d.data),console.log(`Order status updated to: ${i}`),await E(),m.success("Đã Cập Nhật Thành Công Trạng Thái Thành "+i),i==="Sẵn sàng giao"&&m.success("Mã vận đơn đã được tạo")}catch(d){console.error("Failed to update order status:",((s=d.response)==null?void 0:s.data)||d.message),(r=d.response)!=null&&r.data?m.error(d.response.data.message||d.response.data):m.error("Lỗi hệ thống, vui lòng thử lại sau!")}finally{A.value=!1}},K=async i=>{var s,r;const t=I.params.id;try{const d=await Ln(t,i);a.trangThaiThanhToan=i,await E(),i==="PAID"?m.success("Đã xác nhận nhận tiền"):m.success("Hoàn tiền thành công")}catch(d){console.error("Failed to update invoice status:",((s=d.response)==null?void 0:s.data)||d.message),(r=d.response)!=null&&r.data?m.error(d.response.data.message||d.response.data):m.error("Lỗi hệ thống, vui lòng thử lại sau!")}},yn=()=>{a.driver&&window.open(`tel:${a.sdtNguoiNhan}`)},P=h(!1),Y=h([]),Tn=async()=>{try{const i=I.params.id,t=await En(i);Y.value=t.data,P.value=!0}catch(i){console.error("Lỗi khi lấy lịch sử hóa đơn:",i),m.error("Không thể tải lịch sử hóa đơn")}},G=h(null),R=h(!1),V=h(null);function fn(i){V.value=i,R.value=!0}function bn(){R.value=!1,V.value=null}Gn(()=>{E()});const S=h(!1),z=h("");let F=null;function b(i,t){z.value=i,F=t,S.value=!0}const _n=async i=>{try{await Mn(i.idHoaDon),a.shippingMethod="standard",m.success("Đã chuyển thành giao hàng tiêu chuẩn")}catch(t){console.error("Lỗi khi update shipping-method:",t)}};function Dn(){F&&F(),S.value=!1}return(i,t)=>(e(),o("div",Qn,[n("div",Wn,[n("div",qn,[a.maVanDon?(e(),o("h1",nt,"Đơn hàng #"+l(a.maVanDon),1)):(e(),o("h1",tt,"Hóa đơn #"+l(a.maHoaDon),1)),n("p",st,[u(g(Rn),{class:"icon-small"}),p(" Ngày đặt: "+l(C(a.ngayDatHang)),1)])]),n("div",at,[t[18]||(t[18]=n("strong",null,"Trạng thái đơn hàng",-1)),t[19]||(t[19]=n("br",null,null,-1)),n("span",{class:H("status status-"+cn(a.trangThaiDonHang))},l(rn(a.trangThaiDonHang)),3)]),n("div",it,[n("div",et,[t[20]||(t[20]=n("span",{class:"total-label"},[n("strong",null,"Tổng tiền")],-1)),n("span",ot,l(L(a.thanhTien)),1)]),n("span",{class:H("payment-status "+un(a.trangThaiThanhToan))},l(dn(a.trangThaiThanhToan)),3)])]),n("div",lt,[n("div",rt,[t[21]||(t[21]=n("div",{class:"timeline-line"},null,-1)),(e(!0),o(v,null,y(nn.value,(s,r)=>(e(),o("div",{key:s.id,class:H(["timeline-step",{active:s.status==="completed",current:s.status==="current",pending:s.status==="pending"}])},[n("div",ct,[(e(),w($(s.icon),{class:"icon"}))]),n("div",dt,[n("div",ut,l(s.title),1),s.timestamp?(e(),o("div",gt,l(C(s.timestamp)),1)):c("",!0),s.description?(e(),o("div",ht,l(s.description),1)):c("",!0)]),s.status!=="pending"?(e(),o("div",pt)):c("",!0)],2))),128))])]),n("div",mt,[n("div",vt,[n("div",yt,[t[22]||(t[22]=n("div",{class:"timeline-line"},null,-1)),(e(!0),o(v,null,y(tn.value,(s,r)=>(e(),o("div",{key:s.id,class:H(["timeline-step",{active:s.status==="completed",current:s.status==="current",pending:s.status==="pending"}])},[n("div",Tt,[(e(),w($(s.icon),{class:"icon"}))]),n("div",ft,[n("div",bt,l(s.title),1),s.timestamp?(e(),o("div",_t,l(C(s.timestamp)),1)):c("",!0),s.description?(e(),o("div",Dt,l(s.description),1)):c("",!0)]),s.status!=="pending"?(e(),o("div",Ct)):c("",!0)],2))),128))])]),n("div",kt,[n("div",Ht,[t[23]||(t[23]=n("div",{class:"timeline-line"},null,-1)),(e(!0),o(v,null,y(sn.value,(s,r)=>(e(),o("div",{key:s.id,class:H(["timeline-step-false",{active:s.status==="completed",current:s.status==="current",pending:s.status==="pending"}])},[n("div",Nt,[(e(),w($(s.icon),{class:"icon"}))]),n("div",It,[n("div",Gt,l(s.title),1),s.timestamp?(e(),o("div",St,l(C(s.timestamp)),1)):c("",!0),s.description?(e(),o("div",wt,l(s.description),1)):c("",!0)])],2))),128))])])]),n("div",Mt,[n("div",Et,[a.trangThaiThanhToan==="PENDING"&&"Đã giao".includes(a.trangThaiDonHang)?(e(),o("button",{key:0,onClick:t[0]||(t[0]=s=>b("Xác nhận đã nhận tiền?",()=>K("PAID"))),class:"action-btn complete-btn"},[u(g(D),{class:"icon-small"}),t[24]||(t[24]=p(" ĐÃ NHẬN TIỀN "))])):c("",!0),a.trangThaiThanhToan==="PAID"&&a.trangThaiDonHang==="Đã hủy"?(e(),o("button",{key:1,onClick:t[1]||(t[1]=s=>b("Xác nhận đã hoàn tiền?",()=>K("REFUNDED"))),class:"action-btn complete-btn"},[u(g(D),{class:"icon-small"}),t[25]||(t[25]=p(" ĐÃ HOÀN TIỀN "))])):c("",!0),an.value?(e(),o("button",{key:2,onClick:t[2]||(t[2]=s=>b("Xác nhận đơn hàng?",()=>f("Đã xác nhận"))),class:"action-btn confirm-btn"},[u(g(D),{class:"icon-small"}),t[26]||(t[26]=p(" XÁC NHẬN ĐƠN HÀNG "))])):c("",!0),en.value?(e(),o("button",{key:3,onClick:t[3]||(t[3]=s=>b("Xác nhận đóng gói?",()=>f("Đã đóng gói"))),class:"action-btn pack-btn"},[u(g(D),{class:"icon-small"}),t[27]||(t[27]=p(" XÁC NHẬN ĐÓNG GÓI "))])):c("",!0),X.value?(e(),o("button",{key:4,onClick:t[4]||(t[4]=s=>b("Xác nhận sẵn sàng giao?",()=>f("Sẵn sàng giao"))),class:"action-btn ready-btn",disabled:A.value},[u(g(D),{class:"icon-small"}),t[28]||(t[28]=p(" SẴN SÀNG GIAO "))],8,Lt)):c("",!0),X.value&&a.shippingMethod=="express"&&a.trangThaiThanhToan=="PENDING"?(e(),o("button",{key:5,onClick:t[5]||(t[5]=s=>_n(a)),class:"action-btn ship-btn"},[u(g(M),{class:"icon-small"}),t[29]||(t[29]=p(" VẬN CHUYỂN TIÊU CHUẨN "))])):c("",!0),a.trangThaiDonHang==="Sẵn sàng giao"?(e(),o("button",{key:6,onClick:t[6]||(t[6]=s=>b("Bắt đầu giao hàng?",()=>f("Đang giao"))),class:"action-btn ship-btn"},[u(g(M),{class:"icon-small"}),t[30]||(t[30]=p(" BẮT ĐẦU GIAO HÀNG "))])):c("",!0),a.trangThaiDonHang==="Đang giao"?(e(),o("button",{key:7,onClick:t[7]||(t[7]=s=>b("Xác nhận hoàn thành?",()=>f("Đã giao"))),class:"action-btn complete-btn"},[u(g(D),{class:"icon-small"}),t[31]||(t[31]=p(" HOÀN THÀNH "))])):c("",!0),on.value?(e(),o("button",{key:8,onClick:t[8]||(t[8]=s=>b("Bạn có chắc muốn hủy đơn?",()=>f("Đã hủy"))),class:"action-btn cancel-btn"},[u(g(Q),{class:"icon-small"}),t[32]||(t[32]=p(" HỦY ĐƠN "))])):c("",!0),ln.value?(e(),o("button",{key:9,onClick:t[9]||(t[9]=s=>hn()),class:"action-btn cancel-btn"},[u(g(Q),{class:"icon-small"}),t[33]||(t[33]=p(" GIAO THẤT BẠI "))])):c("",!0),N.value?(e(),o("div",xt,[n("div",At,[t[35]||(t[35]=n("h3",{class:"fail-title"},"Chọn lý do giao thất bại",-1)),O(n("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>k.value=s),class:"fail-select"},[t[34]||(t[34]=n("option",{disabled:"",value:""},"-- Chọn lý do --",-1)),(e(!0),o(v,null,y(B.value,s=>(e(),o("option",{key:s.id,value:s.idReason},l(s.tenLyDo),9,Pt))),128))],512),[[j,k.value]]),n("div",Rt,[n("button",{class:"fail-btn-cancel",onClick:t[11]||(t[11]=s=>N.value=!1)},"Hủy"),n("button",{class:"fail-btn-confirm",disabled:!k.value,onClick:pn}," Xác nhận ",8,Vt)])])])):c("",!0),x.value?(e(),o("div",Ft,[n("div",$t,[t[39]||(t[39]=n("h3",{class:"return-title"},"Chọn sản phẩm/IMEI muốn trả",-1)),n("div",Ot,[(e(!0),o(v,null,y(_.value,s=>(e(),o("label",{key:s.idImei,class:"return-imei-item"},[O(n("input",{type:"checkbox","onUpdate:modelValue":r=>s.selected=r},null,8,Ut),[[Sn,s.selected]]),n("div",Xt,[n("span",Bt,l(s.soImei),1),n("span",Kt,l(s.tenSanPham)+" - "+l(s.dungLuongRom)+" - "+l(s.tenMau)+" ("+l(s.giaBan.toLocaleString())+"đ) ",1)])]))),128))]),_.value.some(s=>s.selected)?(e(),o("div",Yt,[t[38]||(t[38]=n("h4",null,"Danh sách trả hàng",-1)),n("table",zt,[t[37]||(t[37]=n("thead",null,[n("tr",null,[n("th",null,"IMEI"),n("th",null,"Sản phẩm"),n("th",null,"Lý do trả")])],-1)),n("tbody",null,[(e(!0),o(v,null,y(_.value.filter(s=>s.selected),s=>(e(),o("tr",{key:s.idImei},[n("td",null,l(s.soImei),1),n("td",null,l(s.tenSanPham)+" - "+l(s.dungLuongRom)+" - "+l(s.tenMau),1),n("td",null,[O(n("select",{"onUpdate:modelValue":r=>s.reasonId=r,class:"return-select"},[t[36]||(t[36]=n("option",{disabled:"",value:""},"-- Chọn lý do --",-1)),(e(!0),o(v,null,y(mn.value,r=>(e(),o("option",{key:r.idReason,value:r.idReason},l(r.tenLyDo),9,Zt))),128))],8,jt),[[j,s.reasonId]])])]))),128))])])])):c("",!0),n("div",Jt,[n("button",{class:"return-btn cancel",onClick:t[12]||(t[12]=s=>x.value=!1)},"Hủy"),n("button",{class:"return-btn confirm",disabled:!_.value.some(s=>s.selected)||_.value.filter(s=>s.selected).some(s=>!s.reasonId),onClick:vn}," Xác nhận ",8,Qt)])])])):c("",!0)]),n("div",Wt,[n("button",{onClick:Tn,class:"action-btn print-btn"},[u(g(Jn),{class:"icon-small"}),t[40]||(t[40]=p(" XEM YÊU CẦU "))])])]),S.value?(e(),w(Kn,{key:0,message:z.value,onConfirm:Dn,onCancel:t[13]||(t[13]=s=>S.value=!1)},null,8,["message"])):c("",!0),t[54]||(t[54]=n("br",null,null,-1)),t[55]||(t[55]=n("br",null,null,-1)),n("div",qt,[n("div",ns,[n("div",ts,[n("div",ss,[u(g(U),{class:"icon"}),t[41]||(t[41]=n("h3",null,"Thông tin khách hàng",-1))]),n("div",as,[n("div",is,[n("div",es,[u(g(U),{class:"avatar-icon"})]),n("div",os,[n("h4",null,l(a.tenNguoiMua||"Khách vãng lai")+" ( Người mua )",1),n("div",{class:H(["customer-type",W(a.hangKhachHang)])},[n("span",null,l(q(a.hangKhachHang)),1)],2)])]),t[43]||(t[43]=n("br",null,null,-1)),n("div",ls,[t[42]||(t[42]=n("h5",null,"Thông tin người nhận",-1)),n("div",rs,[u(g(U),{class:"icon-small"}),n("span",null,l(a.tenNguoiNhan),1)]),n("div",cs,[u(g(Vn),{class:"icon-small"}),n("span",null,l(a.sdtNguoiNhan),1)]),n("div",ds,[u(g(Fn),{class:"icon-small"}),n("span",null,l(a.emailNguoiNhan),1)])])])]),n("div",us,[n("div",gs,[u(g($n),{class:"icon"}),t[44]||(t[44]=n("h3",null,"Thông tin giao hàng",-1))]),n("div",hs,[n("div",ps,[n("div",ms,[t[45]||(t[45]=n("label",null,"Địa chỉ giao hàng",-1)),n("p",null,l(a.diaChiGiaoHang),1)]),n("div",vs,[t[46]||(t[46]=n("label",null,"Người giao hàng",-1)),a.driver?(e(),o("div",ys,[n("div",Ts,[u(g(M),{class:"icon-small"})]),n("div",null,[n("p",fs,l(a.driver.name),1),n("p",bs,l(a.driver.phone),1)]),n("button",{onClick:yn,class:"contact-btn"},"Gọi")])):(e(),o("p",_s,"Nhân viên cửa hàng"))]),n("div",Ds,[t[47]||(t[47]=n("label",null,"Ghi chú",-1)),n("p",null,l(a.deliveryNotes||"Không có ghi chú"),1)])])])]),n("div",Cs,[n("div",ks,[u(g(J),{class:"icon"}),t[48]||(t[48]=n("h3",null,"Sản phẩm",-1))]),n("div",Hs,[n("div",Ns,[(e(!0),o(v,null,y(a.chiTietHoaDonAdminResponseList,s=>(e(),o("div",{key:s.id,class:"item-row"},[n("img",{src:s.imageSanPham,alt:s.tenSanPham,class:"item-image"},null,8,Is),n("div",Gs,[n("span",Ss,l(s.tenSanPham),1),n("span",ws,l(s.rom)+" • "+l(s.mau),1),n("div",Ms,[t[49]||(t[49]=n("span",{class:"imei-label"},"Số IMEI:",-1)),n("ul",null,[(e(!0),o(v,null,y(s.danhSachImei,r=>(e(),o("li",{key:r},l(r),1))),128))])])]),n("span",Es,l(L(s.donGia)),1)]))),128))]),n("div",Ls,[n("div",xs,[t[50]||(t[50]=n("span",{class:"total-label"},"Tổng cộng:",-1)),n("span",As,l(L(a.thanhTien)),1)])])])])])]),P.value?(e(),o("div",Ps,[n("div",Rs,[t[52]||(t[52]=n("h3",{class:"request-title"},"Danh sách yêu cầu",-1)),n("table",Vs,[t[51]||(t[51]=n("thead",null,[n("tr",null,[n("th",null,"STT"),n("th",null,"IMEI"),n("th",null,"Loại yêu cầu"),n("th",null,"Lý do"),n("th",null,"Trạng thái"),n("th",null,"Thời gian yêu cầu"),n("th",null,"Thời gian xử lý"),n("th",null,"Hình ảnh"),n("th",null,"Video"),n("th",null,"Đã kiểm tra")])],-1)),n("tbody",null,[(e(!0),o(v,null,y(Y.value,(s,r)=>(e(),o("tr",{key:s.id},[n("td",null,l(r+1),1),n("td",null,l(s.soImei),1),n("td",null,l(s.loaiVuViec),1),n("td",null,l(s.lyDoXuLy),1),n("td",null,l(s.hanhDongSauVuViec),1),n("td",null,l(C(s.thoiGianYeuCau)),1),n("td",null,l(s.thoiGianXuLy?C(s.thoiGianXuLy):"Chưa xử lý"),1),n("td",null,[s.urlHinh?(e(),o("button",{key:0,onClick:d=>G.value=s.urlHinh,style:{cursor:"pointer"},class:"view-button"}," Xem hình ảnh ",8,Fs)):(e(),o("span",$s,"Không có hình ảnh"))]),n("td",null,[s.urlVideo?(e(),o("button",{key:0,onClick:d=>fn(s.urlVideo),style:{cursor:"pointer"},class:"view-button"}," Xem video ",8,Os)):(e(),o("span",Us,"Không có video"))]),n("td",null,l(s.daKiemTra?"✔️":"❌"),1)]))),128))])]),n("div",Xs,[n("button",{class:"request-btn cancel",onClick:t[14]||(t[14]=s=>P.value=!1)},"Đóng")])])])):c("",!0),G.value?(e(),o("div",{key:2,class:"tw-modal-overlay",onClick:t[16]||(t[16]=s=>G.value=null)},[n("div",{class:"tw-modal-content",onClick:t[15]||(t[15]=Z(()=>{},["stop"]))},[n("img",{src:G.value,alt:"Preview Image",class:"preview-image"},null,8,Bs)])])):c("",!0),R.value?(e(),o("div",{key:3,class:"tw-modal-overlay",onClick:bn},[n("div",{class:"tw-modal-content",onClick:t[17]||(t[17]=Z(()=>{},["stop"]))},[n("video",Ks,[n("source",{src:V.value,type:"video/mp4"},null,8,Ys),t[53]||(t[53]=p(" Your browser does not support the video tag. "))])])])):c("",!0)]))}},oa=kn(zs,[["__scopeId","data-v-43db0f01"]]);export{oa as default};
